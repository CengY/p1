function Log(t,e){void 0===e&&(e=!1),egret.log(t)}var __reflect=this&&this.__reflect||function(t,e,r){t.__class__=e,r?r.push(e):r=[e],t.__types__=t.__types__?r.concat(t.__types__):r},__extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},core;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.addElement=function(t,e){e.$parent!=t&&(e.$parent&&this.removeElementFromParent(e),t.$children.push(e),e.$parent=t)},e.prototype.addElementAt=function(t,e,r){e.$parent!=t&&(e.$parent&&this.removeElementFromParent(e),t.$children.splice(r,0,e),e.$parent=t)},e.prototype.removeElementFromParent=function(t){if(t&&t.$parent){var e=t.$parent.$children.indexOf(t);t.$parent.$children.splice(e,1),t.$parent=null}},e.prototype.removeElementAt=function(t,e){var r=t.$children[e];r&&(t.$children.splice(e,1),r.$parent=null)},e.prototype.removeAllElement=function(t){for(;t.$children.length;)this.removeElementAt(t,0)},e}(egret.DisplayObjectContainer);t.RenderItem=e,__reflect(e.prototype,"core.RenderItem")}(core||(core={}));var core;!function(t){var e=function(){function e(e,r){this.moduleName=e,this.loadingUI=r?r:new t.LoadingUI,this.init()}return e.prototype.init=function(){t.EventCenter.getInstance().addEventListener(t.EventID.MODULE_SHOW,this.onModuleShow,this),t.EventCenter.getInstance().addEventListener(t.EventID.MODULE_HIDE,this.onModuleHide,this)},e.prototype.preload=function(){var e=this.getLoadGroup();e.length>0?(this.loadingUI.show(),t.ResUtils.loadGroups(e,this.onLoadProgress,this.onLoadFaild,this.onLoadComplete,this)):this.show(this.data)},e.prototype.onModuleShow=function(t){this.moduleName==t.moduleEnum&&(this.data=t.messageData,this.preload())},e.prototype.onModuleHide=function(){var t=arguments[0];this.moduleName==t&&this.hide()},e.prototype.onLoadProgress=function(t){this.loadingUI.setProgress(t)},e.prototype.onLoadFaild=function(t){Log("资源组"+t.curGroup+"加载失败, 失败URL："+t.curResItem.url)},e.prototype.onLoadComplete=function(t){this.loadingUI.hide(),this.show(this.data)},e.prototype.release=function(){t.EventCenter.getInstance().removeEventListener(t.EventID.MODULE_SHOW,this.onModuleShow,this),t.EventCenter.getInstance().removeEventListener(t.EventID.MODULE_HIDE,this.onModuleHide,this)},e}();t.Control=e,__reflect(e.prototype,"core.Control")}(core||(core={}));var Dictionary=function(){function t(){this.m_keys=[],this.m_values=[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.m_keys.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){return this.m_values.concat()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keys",{get:function(){return this.m_keys.concat()},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.m_keys.indexOf(t)},t.prototype.add=function(t,e){var r=this.indexOf(t);r>=0?this.m_values[r]=e:(this.m_keys.push(t),this.m_values.push(e))},t.prototype.get=function(t){var e=this.indexOf(t);return e>=0?this.m_values[e]:null},t.prototype.remove=function(t){var e=this.indexOf(t);return e>=0?(this.m_keys.splice(e,1),this.m_values.splice(e,1)[0]):null},t.prototype.clear=function(){this.m_keys.length=0,this.m_values.length=0},t.prototype.getRandomData=function(){var t=Math.random()*this.keys.length<<0;return this.m_values[t]},t}();__reflect(Dictionary.prototype,"Dictionary");var core;!function(t){var e=function(t){function e(e,r){var o=t.call(this)||this;return o.messageID=e,o.messageData=r,o}return __extends(e,t),e}(egret.HashObject);t.EventData=e,__reflect(e.prototype,"core.EventData",["core.IMessage"]);var r=function(t){function e(e,r,o){var n=t.call(this,e,o)||this;return n.moduleEnum=r,n}return __extends(e,t),e}(t.EventData);t.ModuleEventData=r,__reflect(r.prototype,"core.ModuleEventData")}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t}();t.ProgressData=e,__reflect(e.prototype,"core.ProgressData")}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t.init=function(e){t.protoBuff=dcodeIO.ProtoBuf.loadProto(e)},t.createMessage=function(e){if(t.protoBuff){var r=t.protoBuff.build(e);if(r){var o=new r;return o.protocol=e,o}Log("ProtoBuf协议："+e+" 在Proto文件中不存在")}else Log("ProtoBuf协议尚未初始化");return null},t.decodeMessage=function(e,r){if(t.protoBuff){var o=t.protoBuff.build(e);if(o)return o.decode(r);Log("ProtoBuf协议："+e+" 在Proto文件中不存在")}else Log("ProtoBuf协议尚未初始化");return null},t}();t.ProtoFactory=e,__reflect(e.prototype,"core.ProtoFactory")}(core||(core={}));var core;!function(t){var e=function(){function t(t){this.data=t}return t}();t.Node=e,__reflect(e.prototype,"core.Node")}(core||(core={}));var core;!function(t){var e=function(){function e(e){if(this.list=[],e)for(var r=0,o=e.length;o>r;r++){var n=new t.Node(e[r]);this.list.push(n)}for(var i=this.list,r=0,o=i.length;o>r;r++){var n=i[r];r+1==o?n.nextNode=i[0]:n.nextNode=i[r+1],0==r?n.preNode=i[o-1]:n.preNode=i[r-1]}}return e.prototype.getLen=function(){return this.list.length},e.prototype.getFirst=function(){return this.list[0]},e.prototype.getEnd=function(){return this.list[this.list.length-1]},e.prototype.getNode=function(t){return this.list[t]},e.prototype.clear=function(){this.list.length=0},e}();t.NodeList=e,__reflect(e.prototype,"core.NodeList")}(core||(core={}));var core;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!0,e.touchChildren=!0,e}return __extends(e,t),e}(eui.UILayer);t.EUILayer=e,__reflect(e.prototype,"core.EUILayer")}(core||(core={}));var core;!function(t){var e=function(){function e(){}return e.run=function(e){e.addEventListener(egret.Event.ACTIVATE,this.onActive,this),e.addEventListener(egret.Event.DEACTIVATE,this.onDeactivate,this),t.FrameEventCenter.getInstance().regRenderLoop(e),t.LayerCenter.getInstance().init(e)},e.onActive=function(t){e.isActive=!0},e.onDeactivate=function(t){e.isActive=!1},e}();e.isActive=!0,t.Core=e,__reflect(e.prototype,"core.Core")}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t}();e.MODULE_SHOW="core.Event.MODULE_SHOW",e.MODULE_HIDE="core.Event.MODULE_HIDE",e.SOCKET_CONNECT="core.Event.SOCKET_CONNECT",e.SOCKET_DATA="core.Event.SOCKET_DATA",e.SOCKET_IOERROR="core.Event.SOCKET_IOERROR",e.SOCKET_CLOSE="core.Event.SOCKET_CLOSE",t.EventID=e,__reflect(e.prototype,"core.EventID")}(core||(core={}));var core;!function(t){var e=function(){function t(){this.callbackMaps={},this.sendBuffer=[]}return t.getInstance=function(){return null==t.s_instance&&(t.s_instance=new t),t.s_instance},t.prototype.addEventListener=function(t,e,r,o){if(e){var n=this.callbackMaps[t];null!=n?o?n.splice(0>o?0:o,0,{callback:e,thisObj:r}):n.push({callback:e,thisObj:r}):this.callbackMaps[t]=[{callback:e,thisObj:r}]}},t.prototype.removeEventListener=function(t,e,r){var o=this.callbackMaps[t];if(null!=o)for(var n=o.length;n>0;n--)o[n-1].thisObj===r&&o.splice(n-1,1)},t.prototype.sendEvent=function(t){this.sendBuffer.push(t),egret.startTick(this.onTickerLoop,this)},t.prototype.onTickerLoop=function(t){var e=this.sendBuffer;if(null!=e)if(e.length>0){var r=e.shift(),o=this.callbackMaps[r.messageID];if(null!=o)for(var n=0,i=o.length;i>n;n++){var s=o[n];s.callback&&s.callback.call(s.thisObj,r)}else console.log("事件ID:"+r.messageID+"无监听回调")}else egret.stopTick(this.onTickerLoop,this);return!1},t}();t.EventCenter=e,__reflect(e.prototype,"core.EventCenter")}(core||(core={}));var core;!function(t){var e=function(){function t(t,e){this.display=t,this.radius=e}return t}();t.GaussianBlur=e,__reflect(e.prototype,"core.GaussianBlur")}(core||(core={}));var core;!function(t){var e=function(){function t(){this.renderLoopItems=null,this.renderLoopItems=[]}return t.getInstance=function(){return null==t.s_instance&&(t.s_instance=new t),t.s_instance},t.prototype.regRenderLoop=function(t){null!=t&&(this.preRenderTime=Date.now(),t.addEventListener(egret.Event.ENTER_FRAME,this.onRenderLoop,this))},t.prototype.onRenderLoop=function(t){for(var e=0,r=this.renderLoopItems.length;r>e;e++){var o=this.renderLoopItems[e];null!=o&&o.onRenderLoop(Date.now()-this.preRenderTime)}this.preRenderTime=Date.now()},t.prototype.addRenderLoop=function(t){var e=this.renderLoopItems;-1==e.indexOf(t)&&e.push(t)},t.prototype.removeRenderLoop=function(t){var e=this.renderLoopItems,r=e.indexOf(t);-1!=r&&e.splice(r,1)},t}();t.FrameEventCenter=e,__reflect(e.prototype,"core.FrameEventCenter")}(core||(core={}));var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,r){function o(o){e.call(r,o,t)}if(RES.hasRes(t)){var n=RES.getRes(t);n?o(n):RES.getResAsync(t,o,this)}else RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var core;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!0,e.touchChildren=!0,e}return __extends(e,t),e}(egret.DisplayObjectContainer);t.Layer=e,__reflect(e.prototype,"core.Layer")}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t.getInstance=function(){return null==t.s_instance&&(t.s_instance=new t),t.s_instance},t.prototype.init=function(e){e&&(this.stage=e,this.layers=[],t.stageWidth=e.stageWidth,t.stageHeight=e.stageHeight)},t.prototype.addLayer=function(t,e){this.layers[t]=e,this.stage.addChildAt(e,t)},t.prototype.getLayer=function(t){return this.layers[t]},t.prototype.removeLayer=function(t){var e=this.layers[t];e&&(e.parent&&e.parent.removeChild(e),e.removeChildren(),this.layers[t]=null)},t}();t.LayerCenter=e,__reflect(e.prototype,"core.LayerCenter")}(core||(core={}));var core;!function(t){var e=function(e){function r(){var t=e.call(this)||this;return t.arena_X=0,t.arena_Y=300,t.arena_W=480,t.arena_H=100,t.createView(),t}return __extends(r,e),r.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=this.arena_Y,this.textField.width=this.arena_W,this.textField.height=this.arena_H,this.textField.fontFamily="Verdana",this.textField.textAlign=egret.HorizontalAlign.CENTER,this.textField.verticalAlign=egret.VerticalAlign.MIDDLE,this.textField.text="0%",this.graphics.clear(),this.graphics.lineStyle(2,52428),this.graphics.drawCircle(this.arena_X+.5*this.arena_W,this.arena_Y+.5*this.arena_H,100),this.graphics.moveTo(this.arena_X+.5*this.arena_W+95,this.arena_Y+.5*this.arena_H)},r.prototype.setProgress=function(t){var e=t.loaded/t.total,r=270,o=96;this.textField.text=(100*e>>0)+"%",this.graphics.clear(),this.graphics.lineStyle(3,52428),this.graphics.drawCircle(this.arena_X+.5*this.arena_W,this.arena_Y+.5*this.arena_H,100),this.graphics.moveTo(this.arena_X+.5*this.arena_W,this.arena_Y-.5*o),this.graphics.drawArc(this.arena_X+.5*this.arena_W,this.arena_Y+.5*this.arena_H,o,r*Math.PI/180,(r+360*e)*Math.PI/180)},r.prototype.show=function(){null==this.parent&&(this.x=.5*(t.LayerCenter.stageWidth-this.width),t.LayerCenter.getInstance().stage.addChild(this))},r.prototype.hide=function(){this.removeChildren(),this.parent&&this.parent.removeChild(this)},r}(egret.Sprite);t.LoadingUI=e,__reflect(e.prototype,"core.LoadingUI",["core.ILoadingUI"])}(core||(core={}));var core;!function(t){var e=function(e){function r(t){return e.call(this,t)||this}return __extends(r,e),r.prototype.readUTFData=function(){var t=this.readShort();return e.prototype.readUTFBytes.call(this,t)},r.prototype.writeUTFBytes=function(t){this.writeShort(this.getStringBytesLen(t)),e.prototype.writeUTFBytes.call(this,t)},r.prototype.getStringBytesLen=function(t){var e=new egret.ByteArray;return e.writeUTFBytes(t),e.length},r.prototype.clone=function(){var e=new t.ByteBuffer;return e.writeBytes(this),e},r}(egret.ByteArray);t.ByteBuffer=e,__reflect(e.prototype,"core.ByteBuffer")}(core||(core={}));var HttpAPI=function(){function t(){}return t.HttpGET=function(t,e,r,o,n){var i=e?t+"?"+encodeURI(this.encode(e)):t,s=new egret.HttpRequest;s.responseType=egret.HttpResponseType.TEXT,s.addEventListener(egret.Event.COMPLETE,r,n),s.addEventListener(egret.IOErrorEvent.IO_ERROR,o,n),s.open(i,egret.HttpMethod.GET),s.send()},t.HttpPOST=function(t,e,r,o,n){var i=new egret.HttpRequest;i.responseType=egret.HttpResponseType.TEXT,i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.addEventListener(egret.Event.COMPLETE,r,n),i.addEventListener(egret.IOErrorEvent.IO_ERROR,o,n),i.open(t,egret.URLRequestMethod.POST),i.send(e)},t.encode=function(t){var e="";for(var r in t)e+=r+"="+t[r]+"&";return e.length>1?""+e.substring(0,e.length-1):e},t}();__reflect(HttpAPI.prototype,"HttpAPI");var core;!function(t){var e=function(t){function e(e,r){return void 0===r&&(r={}),t.call(this,e,r)||this}return __extends(e,t),e}(t.EventData);t.MessageData=e,__reflect(e.prototype,"core.MessageData")}(core||(core={}));var core;!function(t){var e=function(e){function r(){var r=e.call(this)||this;return r.touchEnabled=!1,r.touchChildren=!1,r.loop=t.FrameEventCenter.getInstance(),r}return __extends(r,e),r.prototype.play=function(){this.loop.addRenderLoop(this)},r.prototype.stop=function(){this.loop.removeRenderLoop(this)},r.prototype.onRenderLoop=function(t){null==this.parent&&this.stop()},r.prototype.release=function(){},r}(t.RenderItem);t.Animation=e,__reflect(e.prototype,"core.Animation",["core.IRenderLoop"])}(core||(core={}));var core;!function(t){var e=function(){function e(){var e=new egret.WebSocket;e.type=egret.WebSocket.TYPE_BINARY,e.addEventListener(egret.Event.CONNECT,this.onConnected,this),e.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onSocketData,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOError,this),e.addEventListener(egret.Event.CLOSE,this.onClosed,this),this.socket=e,this.sendBuffer=new t.ByteBuffer,this.receiveBuffer=new t.ByteBuffer}return e.getInstance=function(){return null==e.s_instance&&(e.s_instance=new e),e.s_instance},e.prototype.onConnected=function(e){egret.log("与Socket服务器链接成功"),t.EventCenter.getInstance().sendEvent(new t.EventData(t.EventID.SOCKET_CONNECT))},e.prototype.onSocketData=function(t){egret.log("从Socket服务器接收数据");var e=this.receiveBuffer;e.writeBytes(t.data,e.length),this.readData(e.clone())},e.prototype.readData=function(t){t.position=0;var e=t.readUnsignedShort();t.bytesAvailable>=e},e.prototype.onIOError=function(e){egret.log("与Socket服务器链接失败"),t.EventCenter.getInstance().sendEvent(new t.EventData(t.EventID.SOCKET_IOERROR))},e.prototype.onClosed=function(e){egret.log("与Socket服务器断开链接"),t.EventCenter.getInstance().sendEvent(new t.EventData(t.EventID.SOCKET_CLOSE))},e.prototype.flushToServer=function(){egret.log("flush数据到Socket服务器"),this.socket.flush()},e.prototype.sendData=function(t){this.flushToServer()},e.prototype.connect=function(t,e){this.socket.connect(t,e)},e.prototype.close=function(){this.socket.close()},e}();t.SocketAPI=e,__reflect(e.prototype,"core.SocketAPI")}(core||(core={}));var core;!function(t){var e=function(){function t(){if(t.s_instance)throw new Error("单例类不可实例化");egret.startTick(this.onTick,this),this.tickList=[]}return t.prototype.onTick=function(t){for(var e=this.tickList,r=0,o=e.length;o>r;r++){var n=e[r];if(n&&Date.now()-n.timestamp>n.delay){if(n.timestamp=Date.now(),n.replayCount--,n.callback){var i=Date.now();n.callback.call(n.thisObj,n.clone());var s=Date.now();s-i>2&&Log("tick回调耗时:"+(s-i))}n.replayCount<=0&&(n.isValid=!1)}}for(var a=e.length;a>0;){var n=e[a-1];n.isValid||e.splice(a-1,1),a--}return!1},t.prototype.addTick=function(t,e,o,n){for(var i=[],s=4;s<arguments.length;s++)i[s-4]=arguments[s];var a=this.tickList;if(a)for(var h=0,u=a.length;u>h;h++){var c=a[h];if(c.callback==o&&c.thisObj==n)return}else a=[],this.tickList=a;var l=new r;l.delay=t,l.replayCount=0>=e?Number.MAX_VALUE:e,l.callback=o,l.thisObj=n,l.args=i,l.timestamp=Date.now(),l.isValid=!0,a.push(l)},t.prototype.removeTick=function(t,e){var r=this.tickList;if(r)for(var o=0,n=r.length;n>o;o++){var i=r[o];if(i.callback==t&&i.thisObj==e)return void r.splice(o,1)}},t.prototype.removeTicks=function(t){var e=this.tickList;if(e){for(var r=0,o=e.length;o>r;r++){var n=e[r];n.thisObj==t&&(n.isValid=!1)}for(var i=e.length;i>0;){var n=e[i-1];n.isValid||e.splice(i-1,1),i--}}},t.prototype.removeAllTicks=function(){this.tickList.length=0},Object.defineProperty(t,"instance",{get:function(){return null==t.s_instance&&(t.s_instance=new t),t.s_instance},enumerable:!0,configurable:!0}),t}();t.TimerManager=e,__reflect(e.prototype,"core.TimerManager");var r=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.clone=function(){var t=new e;return t.delay=this.delay,t.replayCount=this.replayCount,t.callback=this.callback,t.thisObj=this.thisObj,t.args=this.args,t.isValid=this.isValid,t},e}(egret.HashObject);t.TickData=r,__reflect(r.prototype,"core.TickData")}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t.initEncodeChar=function(){for(var t=new Array(64),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,o=e.length;o>r;r++)t[r]=e.charCodeAt(r);return t},t.initDecodeChar=function(){var t=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];return t},t.encode=function(e){var r=new egret.ByteArray,o=0,n=e.length,i=n%3,s=n-i,a=0;for(e.position=0;s>o;)a=(255&e.readByte())<<16|(255&e.readByte())<<8|255&e.readByte(),r.writeByte(t.encodeChars[a>>>18]),r.writeByte(t.encodeChars[a>>>12&63]),r.writeByte(t.encodeChars[a>>>6&63]),r.writeByte(t.encodeChars[63&a]),o+=3;return 1==i?(a=255&e.readByte(),r.writeByte(t.encodeChars[a>>>2]),r.writeByte(t.encodeChars[3&a]),r.writeByte(61),r.writeByte(61)):2==i&&(a=(255&e.readByte())<<8|255&e.readByte(),r.writeByte(t.encodeChars[a>>>10]),r.writeByte(t.encodeChars[a>>>4&63]),r.writeByte(t.encodeChars[(15&a)<<2]),r.writeByte(61)),o+=i,r.position=0,r.readUTFBytes(r.length)},t.decode=function(e){var r=new egret.ByteArray,o=new egret.ByteArray;o.writeUTFBytes(e),o.position=0;for(var n,i,s,a,h=0,u=o.length;u>h&&(n=t.decodeChars[255&o.readByte()],-1!=n)&&(i=t.decodeChars[255&o.readByte()],-1!=i)&&(r.writeByte(n<<2|3&i),s=255&o.readByte(),61!=s)&&(s=t.decodeChars[s],-1!=s)&&(r.writeByte(240&i|15&s),a=255&o.readByte(),61!=a)&&(a=t.decodeChars[a],-1!=a);)r.writeByte(192&s|a),h+=4;return r.position=0,r},t.encodeStr=function(e){if(null!=e&&""!=e){var r=new egret.ByteArray;return r.writeUTFBytes(e),t.encode(r)}return""},t.decodeStr=function(e){if(null!=e&&""!=e){var r=t.decode(e);return r.readUTFBytes(r.length)}return""},t}();e.encodeChars=e.initEncodeChar(),e.decodeChars=e.initDecodeChar(),t.Base64=e,__reflect(e.prototype,"core.Base64")}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t.addObj=function(e,r){var o=t.pool[e];o?o.push(r):t.pool[e]=[r]},t.getObj=function(e){var r=t.pool[e];return r?r.pop():null},t.clear=function(e){delete t.pool[e]},t.clearAll=function(){t.pool={}},t}();e.pool={},t.CachePool=e,__reflect(e.prototype,"core.CachePool")}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t.setServerTime=function(t){this.s_clintTimestamp=Date.now(),this.s_serverTimestamp=t},t.getServerTimeMill=function(){return this.s_serverTimestamp+(Date.now()-this.s_clintTimestamp)},t.formatDate=function(e,r){null==r&&(r=t.date);var o={"M+":r.getUTCMonth()+1,"d+":r.getUTCDate(),"h+":r.getUTCHours(),"m+":r.getUTCMinutes(),"s+":r.getUTCSeconds(),"q+":Math.floor((r.getUTCMonth()+3)/3),S:r.getUTCMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(r.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in o)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?o[n]:("00"+o[n]).substr((""+o[n]).length)));return e},t.format=function(t){var e=t,r=t%1e3;e=.001*(e-r);var o=e%60;e=(e-o)/60;var n=e%60;return e=(e-n)/60,(0>e?0:e)+":"+(n>9?n:"0"+(0>n?0:n))+":"+(o>9?o:"0"+(0>o?0:o))},t}();e.date=new Date,t.DateUtils=e,__reflect(e.prototype,"core.DateUtils")}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t.begin=function(e){t.s_dic[e]=Date.now()},t.finish=function(e){return Date.now()-t.s_dic[e]},t}();e.s_dic=new Dictionary,t.DebugUtils=e,__reflect(e.prototype,"core.DebugUtils")}(core||(core={}));var Long=function(){function t(t,e,r){this.__isLong__={value:!0,enumerable:!1,configurable:!1},this.low=0|t,this.high=0|e,this.unsigned=!!r}return t.prototype.isLong=function(t){return(t&&t.__isLong__)===!0},t.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},t.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*t.TWO_PWR_32_DBL+(this.low>>>0):this.high*t.TWO_PWR_32_DBL+(this.low>>>0)},t.prototype.toString=function(e){if(e=e||10,2>e||e>36)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(t.MIN_VALUE)){var r=t.fromNumber(e),o=this.div(r),n=o.mul(r).sub(this);return o.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=t.fromNumber(t.pow_dbl(e,6),this.unsigned),s=this,a="";;){var h=s.div(i),u=s.sub(h.mul(i)).toInt()>>>0,c=u.toString(e);if(s=h,s.isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}},Object.defineProperty(t.prototype,"highBitsUnsigned",{get:function(){return this.high>>>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lowBitsUnsigned",{get:function(){return this.low>>>0},enumerable:!0,configurable:!0}),t.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(t.MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,r=31;r>0&&0==(e&1<<r);r--);return 0!=this.high?r+33:r+1},t.prototype.isZero=function(){return 0===this.high&&0===this.low},t.prototype.isNegative=function(){return!this.unsigned&&this.high<0},t.prototype.isPositive=function(){return this.unsigned||this.high>=0},t.prototype.isOdd=function(){return 1===(1&this.low)},t.prototype.isEven=function(){return 0===(1&this.low)},t.prototype.eq=function(e){return this.isLong(e)||(e=t.fromValue(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},t.prototype.neq=function(t){return!this.eq(t)},t.prototype.lt=function(t){return this.compare(t)<0},t.prototype.lte=function(t){return this.compare(t)<=0},t.prototype.gt=function(t){return this.compare(t)>0},t.prototype.gte=function(t){return this.compare(t)>=0},t.prototype.compare=function(e){if(this.isLong(e)||(e=t.fromValue(e)),this.eq(e))return 0;var r=this.isNegative(),o=e.isNegative();return r&&!o?-1:!r&&o?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},t.prototype.neg=function(){return!this.unsigned&&this.eq(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)},t.prototype.add=function(e){this.isLong(e)||(e=t.fromValue(e));var r=this.high>>>16,o=65535&this.high,n=this.low>>>16,i=65535&this.low,s=e.high>>>16,a=65535&e.high,h=e.low>>>16,u=65535&e.low,c=0,l=0,d=0,p=0;return p+=i+u,d+=p>>>16,p&=65535,d+=n+h,l+=d>>>16,d&=65535,l+=o+a,c+=l>>>16,l&=65535,c+=r+s,c&=65535,t.fromBits(d<<16|p,c<<16|l,this.unsigned)},t.prototype.sub=function(e){return this.isLong(e)||(e=t.fromValue(e)),this.add(e.neg())},t.prototype.mul=function(e){if(this.isZero())return t.ZERO;if(this.isLong(e)||(e=t.fromValue(e)),e.isZero())return t.ZERO;if(this.eq(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.eq(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(t.TWO_PWR_24)&&e.lt(t.TWO_PWR_24))return t.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,o=65535&this.high,n=this.low>>>16,i=65535&this.low,s=e.high>>>16,a=65535&e.high,h=e.low>>>16,u=65535&e.low,c=0,l=0,d=0,p=0;return p+=i*u,d+=p>>>16,p&=65535,d+=n*u,l+=d>>>16,d&=65535,d+=i*h,l+=d>>>16,d&=65535,l+=o*u,c+=l>>>16,l&=65535,l+=n*h,c+=l>>>16,l&=65535,l+=i*a,c+=l>>>16,l&=65535,c+=r*u+o*h+n*a+i*s,c&=65535,t.fromBits(d<<16|p,c<<16|l,this.unsigned)},t.prototype.div=function(e){if(this.isLong(e)||(e=t.fromValue(e)),e.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?t.UZERO:t.ZERO;var r,o,n;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return t.UZERO;if(e.gt(this.shru(1)))return t.UONE;n=t.UZERO}else{if(this.eq(t.MIN_VALUE)){if(e.eq(t.ONE)||e.eq(t.NEG_ONE))return t.MIN_VALUE;if(e.eq(t.MIN_VALUE))return t.ONE;var i=this.shr(1);return r=i.div(e).shl(1),r.eq(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(o=this.sub(e.mul(r)),n=r.add(o.div(e)))}if(e.eq(t.MIN_VALUE))return this.unsigned?t.UZERO:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();n=t.ZERO}for(o=this;o.gte(e);){r=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(r)/Math.LN2),a=48>=s?1:t.pow_dbl(2,s-48),h=t.fromNumber(r),u=h.mul(e);u.isNegative()||u.gt(o);)r-=a,h=t.fromNumber(r,this.unsigned),u=h.mul(e);h.isZero()&&(h=t.ONE),n=n.add(h),o=o.sub(u)}return n},t.prototype.mod=function(e){return this.isLong(e)||(e=t.fromValue(e)),this.sub(this.div(e).mul(e))},t.prototype.not=function(){return t.fromBits(~this.low,~this.high,this.unsigned)},t.prototype.and=function(e){return this.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high,this.unsigned)},t.prototype.or=function(e){return this.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high,this.unsigned)},t.prototype.xor=function(e){return this.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high,this.unsigned)},t.prototype.shl=function(e){return this.isLong(e)&&(e=e.toInt()),0===(e&=63)?this:32>e?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t.fromBits(0,this.low<<e-32,this.unsigned)},t.prototype.shr=function(e){return this.isLong(e)&&(e=e.toInt()),0===(e&=63)?this:32>e?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},t.prototype.shru=function(e){if(this.isLong(e)&&(e=e.toInt()),e&=63,0===e)return this;var r=this.high;if(32>e){var o=this.low;return t.fromBits(o>>>e|r<<32-e,r>>>e,this.unsigned)}return 32===e?t.fromBits(r,0,this.unsigned):t.fromBits(r>>>e-32,0,this.unsigned)},t.prototype.toSigned=function(){return this.unsigned?t.fromBits(this.low,this.high,!1):this},t.prototype.toUnsigned=function(){return this.unsigned?this:t.fromBits(this.low,this.high,!0)},t.prototype.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24&255,255&t,t>>>8&255,t>>>16&255,t>>>24&255]},t.prototype.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24&255,t>>>16&255,t>>>8&255,255&t,e>>>24&255,e>>>16&255,e>>>8&255,255&e]},t.fromInt=function(e,r){var o,n,i;return r?(e>>>=0,(i=e>=0&&256>e)&&(n=t.UINT_CACHE[e])?n:(o=t.fromBits(e,0>(0|e)?-1:0,!0),i&&(t.UINT_CACHE[e]=o),o)):(e|=0,(i=e>=-128&&128>e)&&(n=t.INT_CACHE[e])?n:(o=t.fromBits(e,0>e?-1:0,!1),i&&(t.INT_CACHE[e]=o),o))},t.fromNumber=function(e,r){if(isNaN(e)||!isFinite(e))return r?t.UZERO:t.ZERO;if(r){if(0>e)return t.UZERO;if(e>=t.TWO_PWR_64_DBL)return t.MAX_UNSIGNED_VALUE}else{if(e<=-t.TWO_PWR_63_DBL)return t.MIN_VALUE;if(e+1>=t.TWO_PWR_63_DBL)return t.MAX_VALUE}return 0>e?t.fromNumber(-e,r).neg():t.fromBits(e%t.TWO_PWR_32_DBL|0,e/t.TWO_PWR_32_DBL|0,r)},t.fromBits=function(e,r,o){return new t(e,r,o)},t.fromString=function(e,r,o){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t.ZERO;if("number"==typeof r?(o=r,r=!1):r=!!r,o=o||10,2>o||o>36)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return t.fromString(e.substring(1),r,o).neg();for(var i=t.fromNumber(t.pow_dbl(o,8)),s=t.ZERO,a=0;a<e.length;a+=8){var h=Math.min(8,e.length-a),u=parseInt(e.substring(a,a+h),o);if(8>h){var c=t.fromNumber(t.pow_dbl(o,h));s=s.mul(c).add(t.fromNumber(u))}else s=s.mul(i),s=s.add(t.fromNumber(u))}return s.unsigned=r,s},t.fromValue=function(e){return e instanceof t?e:"number"==typeof e?t.fromNumber(e):"string"==typeof e?t.fromString(e):t.fromBits(e.low,e.high,e.unsigned)},t}();Long.INT_CACHE={},Long.UINT_CACHE={},Long.TWO_PWR_16_DBL=65536,Long.TWO_PWR_24_DBL=1<<24,Long.TWO_PWR_32_DBL=Long.TWO_PWR_16_DBL*Long.TWO_PWR_16_DBL,Long.TWO_PWR_64_DBL=Long.TWO_PWR_32_DBL*Long.TWO_PWR_32_DBL,Long.TWO_PWR_63_DBL=Long.TWO_PWR_64_DBL/2,Long.TWO_PWR_24=Long.fromInt(Long.TWO_PWR_24_DBL),Long.ZERO=Long.fromInt(0),Long.UZERO=Long.fromInt(0,!0),Long.ONE=Long.fromInt(1),Long.UONE=Long.fromInt(1,!0),Long.NEG_ONE=Long.fromInt(-1),Long.MAX_VALUE=Long.fromBits(-1,2147483647,!1),Long.MAX_UNSIGNED_VALUE=Long.fromBits(-1,-1,!0),Long.MIN_VALUE=Long.fromBits(0,-2147483648,!1),Long.pow_dbl=Math.pow,__reflect(Long.prototype,"Long");var core;!function(t){var e=function(){function t(){}return t.ceil=function(t){return t%1==0?t:t>0?t+1<<0:t<<0},t}();t.MathUtils=e,__reflect(e.prototype,"core.MathUtils")}(core||(core={}));var core;!function(t){var e=function(){function t(){this.m_factorys={},this.m_mcFactorys={}}return t.prototype.getMovieClip=function(t,e,r,o){void 0===o&&(o=!0);var n=this.m_mcFactorys[t];if(!n){var i=RES.getRes(t),s=RES.getRes(e);n=new egret.MovieClipDataFactory(i,s),n.enableCache=!0,this.m_mcFactorys[t]=n}var a=this.m_factorys[t+">"+r];if(a||(a=[],this.m_factorys[t+">"+r]=a),a.length>0){var h=a.pop();return h.gotoAndStop(1),h}var u=n.generateMovieClipData(r);if(u.mcData){var h=new egret.MovieClip(u);return h.gotoAndStop(1),o&&(h.anchorOffsetX=.5*(h.width+2*u.mcData.frames[0].x),h.anchorOffsetY=.5*(h.height+2*u.mcData.frames[0].y)),h}return null},t.prototype.revertMovieClip=function(t,e,r){if(r){r.gotoAndStop(1),r.parent&&r.parent.removeChild(r);var o=this.m_factorys[t+">"+e];o||(o=[],this.m_factorys[t+">"+e]=o),o.push(r)}},Object.defineProperty(t,"instance",{get:function(){return null==t.s_instance&&(t.s_instance=new t),t.s_instance},enumerable:!0,configurable:!0}),t}();t.MCFactory=e,__reflect(e.prototype,"core.MCFactory")}(core||(core={}));var md5=function(){function t(){this.hexcase=0,this.b64pad=""}return t.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_md5=function(t,e,r){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),r)},t.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.prototype.rstr_hmac_md5=function(t,e){var r=this.rstr2binl(t);r.length>16&&(r=this.binl_md5(r,8*t.length));for(var o=Array(16),n=Array(16),i=0;16>i;i++)o[i]=909522486^r[i],n[i]=1549556828^r[i];
var s=this.binl_md5(o.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(n.concat(s),640))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(e){this.hexcase=0}for(var r,o=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",n="",i=0;i<t.length;i++)r=t.charCodeAt(i),n+=o.charAt(r>>>4&15)+o.charAt(15&r);return n},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(e){this.b64pad=""}for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="",n=t.length,i=0;n>i;i+=3)for(var s=t.charCodeAt(i)<<16|(n>i+1?t.charCodeAt(i+1)<<8:0)|(n>i+2?t.charCodeAt(i+2):0),a=0;4>a;a++)o+=8*i+6*a>8*t.length?this.b64pad:r.charAt(s>>>6*(3-a)&63);return o},t.prototype.rstr2any=function(t,e){var r,o,n,i,s,a=e.length,h=Array(Math.ceil(t.length/2));for(r=0;r<h.length;r++)h[r]=t.charCodeAt(2*r)<<8|t.charCodeAt(2*r+1);var u=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),c=Array(u);for(o=0;u>o;o++){for(s=Array(),i=0,r=0;r<h.length;r++)i=(i<<16)+h[r],n=Math.floor(i/a),i-=n*a,(s.length>0||n>0)&&(s[s.length]=n);c[o]=i,h=s}var l="";for(r=c.length-1;r>=0;r--)l+=e.charAt(c[r]);return l},t.prototype.str2rstr_utf8=function(t){for(var e,r,o="",n=-1;++n<t.length;)e=t.charCodeAt(n),r=n+1<t.length?t.charCodeAt(n+1):0,e>=55296&&56319>=e&&r>=56320&&57343>=r&&(e=65536+((1023&e)<<10)+(1023&r),n++),127>=e?o+=String.fromCharCode(e):2047>=e?o+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?o+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(o+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return o},t.prototype.str2rstr_utf16le=function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(255&t.charCodeAt(r),t.charCodeAt(r)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t.charCodeAt(r)>>>8&255,255&t.charCodeAt(r));return e},t.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),r=0;r<e.length;r++)e[r]=0;for(var r=0;r<8*t.length;r+=8)e[r>>5]|=(255&t.charCodeAt(r/8))<<r%32;return e},t.prototype.binl2rstr=function(t){for(var e="",r=0;r<32*t.length;r+=8)e+=String.fromCharCode(t[r>>5]>>>r%32&255);return e},t.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var r=1732584193,o=-271733879,n=-1732584194,i=271733878,s=0;s<t.length;s+=16){var a=r,h=o,u=n,c=i;r=this.md5_ff(r,o,n,i,t[s+0],7,-680876936),i=this.md5_ff(i,r,o,n,t[s+1],12,-389564586),n=this.md5_ff(n,i,r,o,t[s+2],17,606105819),o=this.md5_ff(o,n,i,r,t[s+3],22,-1044525330),r=this.md5_ff(r,o,n,i,t[s+4],7,-176418897),i=this.md5_ff(i,r,o,n,t[s+5],12,1200080426),n=this.md5_ff(n,i,r,o,t[s+6],17,-1473231341),o=this.md5_ff(o,n,i,r,t[s+7],22,-45705983),r=this.md5_ff(r,o,n,i,t[s+8],7,1770035416),i=this.md5_ff(i,r,o,n,t[s+9],12,-1958414417),n=this.md5_ff(n,i,r,o,t[s+10],17,-42063),o=this.md5_ff(o,n,i,r,t[s+11],22,-1990404162),r=this.md5_ff(r,o,n,i,t[s+12],7,1804603682),i=this.md5_ff(i,r,o,n,t[s+13],12,-40341101),n=this.md5_ff(n,i,r,o,t[s+14],17,-1502002290),o=this.md5_ff(o,n,i,r,t[s+15],22,1236535329),r=this.md5_gg(r,o,n,i,t[s+1],5,-165796510),i=this.md5_gg(i,r,o,n,t[s+6],9,-1069501632),n=this.md5_gg(n,i,r,o,t[s+11],14,643717713),o=this.md5_gg(o,n,i,r,t[s+0],20,-373897302),r=this.md5_gg(r,o,n,i,t[s+5],5,-701558691),i=this.md5_gg(i,r,o,n,t[s+10],9,38016083),n=this.md5_gg(n,i,r,o,t[s+15],14,-660478335),o=this.md5_gg(o,n,i,r,t[s+4],20,-405537848),r=this.md5_gg(r,o,n,i,t[s+9],5,568446438),i=this.md5_gg(i,r,o,n,t[s+14],9,-1019803690),n=this.md5_gg(n,i,r,o,t[s+3],14,-187363961),o=this.md5_gg(o,n,i,r,t[s+8],20,1163531501),r=this.md5_gg(r,o,n,i,t[s+13],5,-1444681467),i=this.md5_gg(i,r,o,n,t[s+2],9,-51403784),n=this.md5_gg(n,i,r,o,t[s+7],14,1735328473),o=this.md5_gg(o,n,i,r,t[s+12],20,-1926607734),r=this.md5_hh(r,o,n,i,t[s+5],4,-378558),i=this.md5_hh(i,r,o,n,t[s+8],11,-2022574463),n=this.md5_hh(n,i,r,o,t[s+11],16,1839030562),o=this.md5_hh(o,n,i,r,t[s+14],23,-35309556),r=this.md5_hh(r,o,n,i,t[s+1],4,-1530992060),i=this.md5_hh(i,r,o,n,t[s+4],11,1272893353),n=this.md5_hh(n,i,r,o,t[s+7],16,-155497632),o=this.md5_hh(o,n,i,r,t[s+10],23,-1094730640),r=this.md5_hh(r,o,n,i,t[s+13],4,681279174),i=this.md5_hh(i,r,o,n,t[s+0],11,-358537222),n=this.md5_hh(n,i,r,o,t[s+3],16,-722521979),o=this.md5_hh(o,n,i,r,t[s+6],23,76029189),r=this.md5_hh(r,o,n,i,t[s+9],4,-640364487),i=this.md5_hh(i,r,o,n,t[s+12],11,-421815835),n=this.md5_hh(n,i,r,o,t[s+15],16,530742520),o=this.md5_hh(o,n,i,r,t[s+2],23,-995338651),r=this.md5_ii(r,o,n,i,t[s+0],6,-198630844),i=this.md5_ii(i,r,o,n,t[s+7],10,1126891415),n=this.md5_ii(n,i,r,o,t[s+14],15,-1416354905),o=this.md5_ii(o,n,i,r,t[s+5],21,-57434055),r=this.md5_ii(r,o,n,i,t[s+12],6,1700485571),i=this.md5_ii(i,r,o,n,t[s+3],10,-1894986606),n=this.md5_ii(n,i,r,o,t[s+10],15,-1051523),o=this.md5_ii(o,n,i,r,t[s+1],21,-2054922799),r=this.md5_ii(r,o,n,i,t[s+8],6,1873313359),i=this.md5_ii(i,r,o,n,t[s+15],10,-30611744),n=this.md5_ii(n,i,r,o,t[s+6],15,-1560198380),o=this.md5_ii(o,n,i,r,t[s+13],21,1309151649),r=this.md5_ii(r,o,n,i,t[s+4],6,-145523070),i=this.md5_ii(i,r,o,n,t[s+11],10,-1120210379),n=this.md5_ii(n,i,r,o,t[s+2],15,718787259),o=this.md5_ii(o,n,i,r,t[s+9],21,-343485551),r=this.safe_add(r,a),o=this.safe_add(o,h),n=this.safe_add(n,u),i=this.safe_add(i,c)}return[r,o,n,i]},t.prototype.md5_cmn=function(t,e,r,o,n,i){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(o,i)),n),r)},t.prototype.md5_ff=function(t,e,r,o,n,i,s){return this.md5_cmn(e&r|~e&o,t,e,n,i,s)},t.prototype.md5_gg=function(t,e,r,o,n,i,s){return this.md5_cmn(e&o|r&~o,t,e,n,i,s)},t.prototype.md5_hh=function(t,e,r,o,n,i,s){return this.md5_cmn(e^r^o,t,e,n,i,s)},t.prototype.md5_ii=function(t,e,r,o,n,i,s){return this.md5_cmn(r^(e|~o),t,e,n,i,s)},t.prototype.safe_add=function(t,e){var r=(65535&t)+(65535&e),o=(t>>16)+(e>>16)+(r>>16);return o<<16|65535&r},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();__reflect(md5.prototype,"md5");var core;!function(t){var e=function(){function t(){}return Object.defineProperty(t,"isPC",{get:function(){return"Windows PC"==egret.Capabilities.os},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isiOS",{get:function(){return"iOS"==egret.Capabilities.os},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isAndroid",{get:function(){return"Android"==egret.Capabilities.os},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isWindowPhone",{get:function(){return"Windows Phone"==egret.Capabilities.os},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isMacOS",{get:function(){return"Mac OS"==egret.Capabilities.os},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isUnknown",{get:function(){return"Unknown"==egret.Capabilities.os},enumerable:!0,configurable:!0}),t}();t.PlatUtils=e,__reflect(e.prototype,"core.PlatUtils")}(core||(core={}));var core;!function(t){var e=function(){function t(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this)}return t.prototype.onResourceLoadError=function(t){this.groupData.curGroup==t.groupName&&(this.groupData.curGroupLoaded=t.itemsLoaded,this.groupData.curGroupTotal=t.itemsTotal,this.groupData.curResItem=t.resItem,this.groupData.onLoadFaild&&this.groupData.onLoadFaild.call(this.groupData.thisObj,this.groupData))},t.prototype.onResourceProgress=function(t){this.updateGroupData(t.groupName,t.itemsLoaded,t.itemsTotal,t.resItem)},t.prototype.onResourceLoadComplete=function(t){this.updateGroupData(t.groupName,t.itemsTotal,t.itemsTotal,t.resItem)},t.prototype.updateGroupData=function(t,e,r,o){void 0===e&&(e=0),void 0===r&&(r=0),this.groupData.curGroup==t&&(this.groupData.curGroupLoaded=e,this.groupData.curGroupTotal=r,this.groupData.curResItem=o,e==r?(this.groupData.loadedQueue.indexOf(t)<0&&(this.groupData.loadedQueue.push(t),this.groupData.loaded=this.groupData.loadedQueue.length),this.groupData.loaded==this.groupData.total?(this.groupData.onLoadComplete&&this.groupData.onLoadComplete.call(this.groupData.thisObj,this.groupData),this.destory()):(this.groupData.onLoadProgress&&this.groupData.onLoadProgress.call(this.groupData.thisObj,this.groupData),this.loadNext())):this.groupData.onLoadProgress&&this.groupData.onLoadProgress.call(this.groupData.thisObj,this.groupData))},t.prototype.loadNext=function(){var t=this.groupData.loadQueue.shift();t?(this.groupData.curGroup=t,RES.isGroupLoaded(t)?this.updateGroupData(t):RES.loadGroup(t)):this.groupData.onLoadComplete&&this.groupData.onLoadComplete.call(this.groupData.thisObj,this.groupData)},t.prototype.destory=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.groupData=null},t.prototype.loadGroups=function(t){this.groupData=t,this.loadNext()},t}();__reflect(e.prototype,"GroupLoader");var r=function(){function t(){}return t.loadGroups=function(t,r,n,i,s){if(t){var a=new o;if(a.loadQueue=t,a.loadedQueue=[],a.loaded=0,a.total=t.length,a.onLoadProgress=r,a.onLoadFaild=n,a.onLoadComplete=i,a.thisObj=s,t.length>0){var h=new e;h.loadGroups(a)}else i&&i.call(s,a)}},t}();t.ResUtils=r,__reflect(r.prototype,"core.ResUtils");var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(t.ProgressData);t.GroupData=o,__reflect(o.prototype,"core.GroupData")}(core||(core={}));var com_main;!function(t){var e=function(){function t(){this.m_BGMVolume=1,this.m_effectVolume=1,this.m_sounds={},this.m_channels={},this.m_callbacks={},this.m_playChannel={},this.m_soundGroups={},this.m_soundGroups[egret.Sound.EFFECT]=[],this.m_soundGroups[egret.Sound.MUSIC]=[];var t=egret.localStorage.getItem("soundEffect");t&&(this.m_effectVolume=parseInt(t)),t=egret.localStorage.getItem("soundBGM"),t&&(this.m_BGMVolume=parseInt(t))}return Object.defineProperty(t.prototype,"playerId",{set:function(t){this.m_playerId=t},enumerable:!0,configurable:!0}),t.prototype.playSoundById=function(t,e){e==this.m_playerId&&this.playSound(t)},t.prototype.playSound=function(t,e,r){void 0===e&&(e=1);var o;if(!o)return void Log("ID为"+t+"的音效在SoundConfig中不存在");this.stopSound(o.coverKey.toString());var n=this.m_sounds[t];if(n||(n=RES.getRes(o.soundName),n.type=0==o.soundType?egret.Sound.EFFECT:egret.Sound.MUSIC,this.m_sounds[t]=n,this.m_soundGroups[n.type].push(n)),!n)return void Log("名称为"+o.soundName+"的音效资源不存在");this.m_playChannel[o.coverKey.toString()]=n,n.cover=o.coverKey.toString();var i=void 0;try{i=n.play(0,e)}catch(s){return Log("ID为"+t+"的音乐播放失败"),void delete this.m_playChannel[o.coverKey.toString()]}i.owner=n,i.maxCount=e>0?e:Number.MAX_VALUE,i.count=0,n.type==egret.Sound.EFFECT?i.volume=this.m_effectVolume:i.volume=this.m_BGMVolume,r&&(this.m_callbacks[i.hashCode.toString()]=r),i.addEventListener(egret.Event.SOUND_COMPLETE,this.onPlayComplete,this),this.m_channels[n.hashCode.toString()]=i},t.prototype.onPlayComplete=function(t){var e=t.currentTarget,r=this.m_callbacks[e.hashCode.toString()];r&&r(),e.count++,e.count>=e.maxCount&&this.stop(e.owner)},t.prototype.stopSoundByID=function(t){var e=this.m_sounds[t];e&&this.stop(e)},t.prototype.stopSound=function(t){var e=this.m_playChannel[t];e&&this.stop(e)},t.prototype.stop=function(t){var e=this.m_channels[t.hashCode.toString()];if(e){try{e.stop()}catch(r){Log("停止播放音乐失败")}e.hasEventListener(egret.Event.SOUND_COMPLETE)&&e.removeEventListener(egret.Event.SOUND_COMPLETE,this.onPlayComplete,this),delete this.m_callbacks[e.hashCode.toString()],delete this.m_channels[t.hashCode.toString()]}delete this.m_playChannel[t.cover]},t.prototype.setBGMValume=function(t){egret.localStorage.setItem("soundBGM",t.toString()),this.m_BGMVolume=t;for(var e=this.m_soundGroups[egret.Sound.MUSIC],r=0,o=e.length;o>r;r++){var n=e[r];if(n){var i=this.m_channels[n.hashCode.toString()];if(i)try{i.volume=t}catch(s){Log("背景音乐音量设置失败")}}}},t.prototype.getBGMValue=function(){return this.m_BGMVolume},t.prototype.setEffectValume=function(t){egret.localStorage.setItem("soundEffect",t.toString()),this.m_effectVolume=t;for(var e=this.m_soundGroups[egret.Sound.EFFECT],r=0,o=e.length;o>r;r++){var n=e[r];if(n){var i=this.m_channels[n.hashCode.toString()];if(i)try{i.volume=t}catch(s){Log("音效音量设置失败")}}}},t.prototype.getEffectValue=function(){return this.m_effectVolume},t.getInstance=function(){return null==t.s_instance&&(t.s_instance=new t),t.s_instance},t}();t.SoundUtils=e,__reflect(e.prototype,"com_main.SoundUtils")}(com_main||(com_main={}));var core;!function(t){var e=function(){function e(){}return e.createTextfield=function(t,e,r,o,n){void 0===e&&(e=16777215),void 0===r&&(r=egret.VerticalAlign.MIDDLE),void 0===o&&(o=egret.HorizontalAlign.CENTER),void 0===n&&(n="Verdana");var i=new egret.TextField;return i.size=t,i.textColor=e,i.textAlign=o,i.verticalAlign=r,i.fontFamily=n,i.cacheAsBitmap=!0,i},e.formatString=function(t,e){if(t){for(var r=/\{[0-9]+\}/;t.match(r);){var o=t.match(r);t=t.replace(r,e[o.index])}return t}return""},e.showTextTip=function(e,r){void 0===r&&(r=16777215);var o=t.LayerCenter.stageWidth,n=t.LayerCenter.stageHeight,i=t.TextUtils.createTextfield(24);i.text=e,i.textColor=r,i.width=i.textWidth,i.height=i.textHeight,i.x=.5*(o-i.width),i.y=.5*(n-i.height),t.LayerCenter.getInstance().stage.addChild(i),egret.Tween.get(i).to({y:.4*n,alpha:0},2e3).call(function(t){t.parent.removeChild(t)},this,[i])},e}();t.TextUtils=e,__reflect(e.prototype,"core.TextUtils")}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t}();__reflect(e.prototype,"WebUtils")}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t}();t.XMLUtils=e,__reflect(e.prototype,"core.XMLUtils")}(core||(core={}));var ModeController=function(t){function e(){return t.call(this,ModuleEnum.Mode)||this}return __extends(e,t),e.prototype.getLoadGroup=function(){return["commonUI"]},e.prototype.show=function(){var t=new ModeView;core.LayerCenter.getInstance().getLayer(LayerEnum.UI).addChild(t)},e.prototype.hide=function(){},e.prototype.release=function(){t.prototype.release.call(this)},e}(core.Control);__reflect(ModeController.prototype,"ModeController");var LayerEnum;!function(t){t[t.BG=0]="BG",t[t.UI=1]="UI",t[t.POPUP=2]="POPUP",t[t.TOP=3]="TOP"}(LayerEnum||(LayerEnum={}));var ModuleEnum;!function(t){t[t.Mode=0]="Mode"}(ModuleEnum||(ModuleEnum={}));var ModeView=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skin/ModeSkin.exml",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e}(eui.Component);__reflect(ModeView.prototype,"ModeView");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var Main=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isThemeLoadEnd=!1,e.isResourceLoadEnd=!1,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),core.Core.run(this.stage),core.LayerCenter.getInstance().addLayer(LayerEnum.BG,new core.Layer),core.LayerCenter.getInstance().addLayer(LayerEnum.UI,new core.EUILayer),core.LayerCenter.getInstance().addLayer(LayerEnum.POPUP,new core.Layer),core.LayerCenter.getInstance().addLayer(LayerEnum.TOP,new core.Layer),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/"),this.initController()},e.prototype.initController=function(){new ModeController},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter);var r=new eui.Theme("resource/default.thm.json",this.stage);r.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},e.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},e.prototype.onResourceLoadComplete=function(t){"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,core.ProtoFactory.init(RES.getRes("game_proto")),this.createScene())},e.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&egret.setTimeout(function(){core.EventCenter.getInstance().sendEvent(new core.ModuleEventData(core.EventID.MODULE_SHOW,ModuleEnum.Mode))},this,1e4)},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e}(eui.UILayer);__reflect(Main.prototype,"Main");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,r,o){function n(t){e.call(o,t)}function i(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),r.call(o))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);