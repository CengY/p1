function Log(e,t){void 0===t&&(t=!1),egret.log(e)}var AssetAdapter=function(){function e(){}var t=(__define,e),r=t.prototype;return r.getAsset=function(e,t,r){function n(n){t.call(r,n,e)}if(RES.hasRes(e)){var i=RES.getRes(e);i?n(i):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var core;!function(e){var t=function(e){function t(){e.call(this)}__extends(t,e);var r=(__define,t),n=r.prototype;return n.addElement=function(e,t){t.$parent!=e&&(t.$parent&&this.removeElementFromParent(t),e.$children.push(t),t.$parent=e)},n.addElementAt=function(e,t,r){t.$parent!=e&&(t.$parent&&this.removeElementFromParent(t),e.$children.splice(r,0,t),t.$parent=e)},n.removeElementFromParent=function(e){if(e&&e.$parent){var t=e.$parent.$children.indexOf(e);e.$parent.$children.splice(t,1),e.$parent=null}},n.removeElementAt=function(e,t){var r=e.$children[t];r&&(e.$children.splice(t,1),r.$parent=null)},n.removeAllElement=function(e){for(;e.$children.length;)this.removeElementAt(e,0)},t}(egret.DisplayObjectContainer);e.RenderItem=t,egret.registerClass(t,"core.RenderItem")}(core||(core={}));var core;!function(e){var t=function(t){function r(){t.call(this),this.touchEnabled=!1,this.touchChildren=!1,this.loop=e.FrameEventCenter.getInstance()}__extends(r,t);var n=(__define,r),i=n.prototype;return i.play=function(){this.loop.addRenderLoop(this)},i.stop=function(){this.loop.removeRenderLoop(this)},i.onRenderLoop=function(e){null==this.parent&&this.stop()},i.release=function(){},r}(e.RenderItem);e.Animation=t,egret.registerClass(t,"core.Animation",["core.IRenderLoop"])}(core||(core={}));var core;!function(e){var t=function(){function t(t,r){this.moduleName=t,this.loadingUI=r?r:new e.LoadingUI,this.init()}var r=(__define,t),n=r.prototype;return n.init=function(){e.EventCenter.getInstance().addEventListener(e.EventID.MODULE_SHOW,this.onModuleShow,this),e.EventCenter.getInstance().addEventListener(e.EventID.MODULE_HIDE,this.onModuleHide,this)},n.preload=function(){var t=this.getLoadGroup();t.length>0?(this.loadingUI.show(),e.ResUtils.loadGroups(t,this.onLoadProgress,this.onLoadFaild,this.onLoadComplete,this)):this.show(this.data)},n.onModuleShow=function(e){this.moduleName==e.moduleEnum&&(this.data=e.messageData,this.preload())},n.onModuleHide=function(){var e=arguments[0];this.moduleName==e&&this.hide()},n.onLoadProgress=function(e){this.loadingUI.setProgress(e)},n.onLoadFaild=function(e){Log("资源组"+e.curGroup+"加载失败, 失败URL："+e.curResItem.url)},n.onLoadComplete=function(e){this.loadingUI.hide(),this.show(this.data)},n.release=function(){e.EventCenter.getInstance().removeEventListener(e.EventID.MODULE_SHOW,this.onModuleShow,this),e.EventCenter.getInstance().removeEventListener(e.EventID.MODULE_HIDE,this.onModuleHide,this)},t}();e.Control=t,egret.registerClass(t,"core.Control")}(core||(core={}));var core;!function(e){var t=function(){function t(){}var r=(__define,t);r.prototype;return t.run=function(t){t.addEventListener(egret.Event.ACTIVATE,this.onActive,this),t.addEventListener(egret.Event.DEACTIVATE,this.onDeactivate,this),e.FrameEventCenter.getInstance().regRenderLoop(t),e.LayerCenter.getInstance().init(t)},t.onActive=function(e){t.isActive=!0},t.onDeactivate=function(e){t.isActive=!1},t.isActive=!0,t}();e.Core=t,egret.registerClass(t,"core.Core")}(core||(core={}));var Dictionary=function(){function e(){this.m_keys=[],this.m_values=[]}var t=__define,r=e,n=r.prototype;return t(n,"length",function(){return this.m_keys.length}),t(n,"values",function(){return this.m_values.concat()}),t(n,"keys",function(){return this.m_keys.concat()}),n.indexOf=function(e){return this.m_keys.indexOf(e)},n.add=function(e,t){var r=this.indexOf(e);r>=0?this.m_values[r]=t:(this.m_keys.push(e),this.m_values.push(t))},n.get=function(e){var t=this.indexOf(e);return t>=0?this.m_values[t]:null},n.remove=function(e){var t=this.indexOf(e);return t>=0?(this.m_keys.splice(t,1),this.m_values.splice(t,1)[0]):null},n.clear=function(){this.m_keys.length=0,this.m_values.length=0},n.getRandomData=function(){var e=Math.random()*this.keys.length<<0;return this.m_values[e]},e}();egret.registerClass(Dictionary,"Dictionary");var core;!function(e){var t=function(){function e(e){this.data=e}var t=(__define,e);t.prototype;return e}();e.Node=t,egret.registerClass(t,"core.Node")}(core||(core={}));var core;!function(e){var t=function(){function t(t){if(this.list=[],t)for(var r=0,n=t.length;n>r;r++){var i=new e.Node(t[r]);this.list.push(i)}for(var o=this.list,r=0,n=o.length;n>r;r++){var i=o[r];r+1==n?i.nextNode=o[0]:i.nextNode=o[r+1],0==r?i.preNode=o[n-1]:i.preNode=o[r-1]}}var r=(__define,t),n=r.prototype;return n.getLen=function(){return this.list.length},n.getFirst=function(){return this.list[0]},n.getEnd=function(){return this.list[this.list.length-1]},n.getNode=function(e){return this.list[e]},n.clear=function(){this.list.length=0},t}();e.NodeList=t,egret.registerClass(t,"core.NodeList")}(core||(core={}));var core;!function(e){var t=function(e){function t(){e.call(this),this.touchEnabled=!0,this.touchChildren=!0}__extends(t,e);var r=(__define,t);r.prototype;return t}(eui.UILayer);e.EUILayer=t,egret.registerClass(t,"core.EUILayer")}(core||(core={}));var core;!function(e){var t=function(e){function t(t,r){e.call(this),this.messageID=t,this.messageData=r}__extends(t,e);var r=(__define,t);r.prototype;return t}(egret.HashObject);e.EventData=t,egret.registerClass(t,"core.EventData",["core.IMessage"]);var r=function(e){function t(t,r,n){e.call(this,t,n),this.moduleEnum=r}__extends(t,e);var r=(__define,t);r.prototype;return t}(e.EventData);e.ModuleEventData=r,egret.registerClass(r,"core.ModuleEventData")}(core||(core={}));var core;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e.MODULE_SHOW="core.Event.MODULE_SHOW",e.MODULE_HIDE="core.Event.MODULE_HIDE",e.SOCKET_CONNECT="core.Event.SOCKET_CONNECT",e.SOCKET_DATA="core.Event.SOCKET_DATA",e.SOCKET_IOERROR="core.Event.SOCKET_IOERROR",e.SOCKET_CLOSE="core.Event.SOCKET_CLOSE",e}();e.EventID=t,egret.registerClass(t,"core.EventID")}(core||(core={}));var core;!function(e){var t=function(){function e(){this.callbackMaps={},this.sendBuffer=[]}var t=(__define,e),r=t.prototype;return e.getInstance=function(){return null==e.s_instance&&(e.s_instance=new e),e.s_instance},r.addEventListener=function(e,t,r,n){if(t){var i=this.callbackMaps[e];null!=i?n?i.splice(0>n?0:n,0,{callback:t,thisObj:r}):i.push({callback:t,thisObj:r}):this.callbackMaps[e]=[{callback:t,thisObj:r}]}},r.removeEventListener=function(e,t,r){var n=this.callbackMaps[e];if(null!=n)for(var i=n.length;i>0;i--)n[i-1].thisObj===r&&n.splice(i-1,1)},r.sendEvent=function(e){this.sendBuffer.push(e),egret.startTick(this.onTickerLoop,this)},r.onTickerLoop=function(e){var t=this.sendBuffer;if(null!=t)if(t.length>0){var r=t.shift(),n=this.callbackMaps[r.messageID];if(null!=n)for(var i=0,o=n.length;o>i;i++){var s=n[i];s.callback&&s.callback.call(s.thisObj,r)}else console.log("事件ID:"+r.messageID+"无监听回调")}else egret.stopTick(this.onTickerLoop,this);return!1},e}();e.EventCenter=t,egret.registerClass(t,"core.EventCenter")}(core||(core={}));var core;!function(e){var t=function(){function e(e,t){this.display=e,this.radius=t}var t=(__define,e);t.prototype;return e}();e.GaussianBlur=t,egret.registerClass(t,"core.GaussianBlur")}(core||(core={}));var core;!function(e){var t=function(){function e(){this.renderLoopItems=null,this.renderLoopItems=[]}var t=(__define,e),r=t.prototype;return e.getInstance=function(){return null==e.s_instance&&(e.s_instance=new e),e.s_instance},r.regRenderLoop=function(e){null!=e&&(this.preRenderTime=Date.now(),e.addEventListener(egret.Event.ENTER_FRAME,this.onRenderLoop,this))},r.onRenderLoop=function(e){for(var t=0,r=this.renderLoopItems.length;r>t;t++){var n=this.renderLoopItems[t];null!=n&&n.onRenderLoop(Date.now()-this.preRenderTime)}this.preRenderTime=Date.now()},r.addRenderLoop=function(e){var t=this.renderLoopItems;-1==t.indexOf(e)&&t.push(e)},r.removeRenderLoop=function(e){var t=this.renderLoopItems,r=t.indexOf(e);-1!=r&&t.splice(r,1)},e}();e.FrameEventCenter=t,egret.registerClass(t,"core.FrameEventCenter")}(core||(core={}));var core;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.ProgressData=t,egret.registerClass(t,"core.ProgressData")}(core||(core={}));var core;!function(e){var t=function(e){function t(){e.call(this),this.touchEnabled=!0,this.touchChildren=!0}__extends(t,e);var r=(__define,t);r.prototype;return t}(egret.DisplayObjectContainer);e.Layer=t,egret.registerClass(t,"core.Layer")}(core||(core={}));var core;!function(e){var t=function(){function e(){}var t=(__define,e),r=t.prototype;return e.getInstance=function(){return null==e.s_instance&&(e.s_instance=new e),e.s_instance},r.init=function(t){t&&(this.stage=t,this.layers=[],e.stageWidth=t.stageWidth,e.stageHeight=t.stageHeight)},r.addLayer=function(e,t){this.layers[e]=t,this.stage.addChildAt(t,e)},r.getLayer=function(e){return this.layers[e]},r.removeLayer=function(e){var t=this.layers[e];t&&(t.parent&&t.parent.removeChild(t),t.removeChildren(),this.layers[e]=null)},e}();e.LayerCenter=t,egret.registerClass(t,"core.LayerCenter")}(core||(core={}));var core;!function(e){var t=function(t){function r(){t.call(this),this.arena_X=0,this.arena_Y=300,this.arena_W=480,this.arena_H=100,this.createView()}__extends(r,t);var n=(__define,r),i=n.prototype;return i.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=this.arena_Y,this.textField.width=this.arena_W,this.textField.height=this.arena_H,this.textField.fontFamily="Verdana",this.textField.textAlign=egret.HorizontalAlign.CENTER,this.textField.verticalAlign=egret.VerticalAlign.MIDDLE,this.textField.text="0%",this.graphics.clear(),this.graphics.lineStyle(2,52428),this.graphics.drawCircle(this.arena_X+.5*this.arena_W,this.arena_Y+.5*this.arena_H,100),this.graphics.moveTo(this.arena_X+.5*this.arena_W+95,this.arena_Y+.5*this.arena_H)},i.setProgress=function(e){var t=e.loaded/e.total,r=270,n=96;this.textField.text=(100*t>>0)+"%",this.graphics.clear(),this.graphics.lineStyle(3,52428),this.graphics.drawCircle(this.arena_X+.5*this.arena_W,this.arena_Y+.5*this.arena_H,100),this.graphics.moveTo(this.arena_X+.5*this.arena_W,this.arena_Y-.5*n),this.graphics.drawArc(this.arena_X+.5*this.arena_W,this.arena_Y+.5*this.arena_H,n,r*Math.PI/180,(r+360*t)*Math.PI/180)},i.show=function(){null==this.parent&&(this.x=.5*(e.LayerCenter.stageWidth-this.width),e.LayerCenter.getInstance().stage.addChild(this))},i.hide=function(){this.removeChildren(),this.parent&&this.parent.removeChild(this)},r}(egret.Sprite);e.LoadingUI=t,egret.registerClass(t,"core.LoadingUI",["core.ILoadingUI"])}(core||(core={}));var core;!function(e){var t=function(t){function r(e){t.call(this,e)}__extends(r,t);var n=(__define,r),i=n.prototype;return i.readUTFData=function(){var e=this.readShort();return t.prototype.readUTFBytes.call(this,e)},i.writeUTFBytes=function(e){this.writeShort(this.getStringBytesLen(e)),t.prototype.writeUTFBytes.call(this,e)},i.getStringBytesLen=function(e){var t=new egret.ByteArray;return t.writeUTFBytes(e),t.length},i.clone=function(){var t=new e.ByteBuffer;return t.writeBytes(this),t},r}(egret.ByteArray);e.ByteBuffer=t,egret.registerClass(t,"core.ByteBuffer")}(core||(core={}));var HttpAPI=function(){function e(){}var t=(__define,e);t.prototype;return e.HttpGET=function(e,t,r,n,i){var o=t?e+"?"+encodeURI(this.encode(t)):e,s=new egret.HttpRequest;s.responseType=egret.HttpResponseType.TEXT,s.addEventListener(egret.Event.COMPLETE,r,i),s.addEventListener(egret.IOErrorEvent.IO_ERROR,n,i),s.open(o,egret.HttpMethod.GET),s.send()},e.HttpPOST=function(e,t,r,n,i){var o=new egret.HttpRequest;o.responseType=egret.HttpResponseType.TEXT,o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.addEventListener(egret.Event.COMPLETE,r,i),o.addEventListener(egret.IOErrorEvent.IO_ERROR,n,i),o.open(e,egret.URLRequestMethod.POST),o.send(t)},e.encode=function(e){var t="";for(var r in e)t+=r+"="+e[r]+"&";return t.length>1?""+t.substring(0,t.length-1):t},e}();egret.registerClass(HttpAPI,"HttpAPI");var core;!function(e){var t=function(e){function t(t,r){void 0===r&&(r={}),e.call(this,t,r)}__extends(t,e);var r=(__define,t);r.prototype;return t}(e.EventData);e.MessageData=t,egret.registerClass(t,"core.MessageData")}(core||(core={}));var core;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e.init=function(t){e.protoBuff=dcodeIO.ProtoBuf.loadProto(t)},e.createMessage=function(t){if(e.protoBuff){var r=e.protoBuff.build(t);if(r){var n=new r;return n.protocol=t,n}Log("ProtoBuf协议："+t+" 在Proto文件中不存在")}else Log("ProtoBuf协议尚未初始化");return null},e.decodeMessage=function(t,r){if(e.protoBuff){var n=e.protoBuff.build(t);if(n)return n.decode(r);Log("ProtoBuf协议："+t+" 在Proto文件中不存在")}else Log("ProtoBuf协议尚未初始化");return null},e}();e.ProtoFactory=t,egret.registerClass(t,"core.ProtoFactory")}(core||(core={}));var core;!function(e){var t=function(){function t(){var t=new egret.WebSocket;t.type=egret.WebSocket.TYPE_BINARY,t.addEventListener(egret.Event.CONNECT,this.onConnected,this),t.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onSocketData,this),t.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOError,this),t.addEventListener(egret.Event.CLOSE,this.onClosed,this),this.socket=t,this.sendBuffer=new e.ByteBuffer,this.receiveBuffer=new e.ByteBuffer}var r=(__define,t),n=r.prototype;return t.getInstance=function(){return null==t.s_instance&&(t.s_instance=new t),t.s_instance},n.onConnected=function(t){egret.log("与Socket服务器链接成功"),e.EventCenter.getInstance().sendEvent(new e.EventData(e.EventID.SOCKET_CONNECT))},n.onSocketData=function(e){egret.log("从Socket服务器接收数据");var t=this.receiveBuffer;t.writeBytes(e.data,t.length),this.readData(t.clone())},n.readData=function(e){e.position=0;var t=e.readUnsignedShort();e.bytesAvailable>=t},n.onIOError=function(t){egret.log("与Socket服务器链接失败"),e.EventCenter.getInstance().sendEvent(new e.EventData(e.EventID.SOCKET_IOERROR))},n.onClosed=function(t){egret.log("与Socket服务器断开链接"),e.EventCenter.getInstance().sendEvent(new e.EventData(e.EventID.SOCKET_CLOSE))},n.flushToServer=function(){egret.log("flush数据到Socket服务器"),this.socket.flush()},n.sendData=function(t){new e.ByteBuffer(t.toArrayBuffer());this.sendBuffer.writeShort(t.length),this.sendBuffer.writeShort(t.messageID),this.sendBuffer.writeBytes(t),this.flushToServer()},n.connect=function(e,t){this.socket.connect(e,t)},n.close=function(){this.socket.close()},t}();e.SocketAPI=t,egret.registerClass(t,"core.SocketAPI")}(core||(core={}));var core;!function(e){var t=function(){function e(){if(e.s_instance)throw new Error("单例类不可实例化");egret.startTick(this.onTick,this),this.tickList=[]}var t=__define,n=e,i=n.prototype;return i.onTick=function(e){for(var t=this.tickList,r=0,n=t.length;n>r;r++){var i=t[r];if(i&&Date.now()-i.timestamp>i.delay){if(i.timestamp=Date.now(),i.replayCount--,i.callback){var o=Date.now();i.callback.call(i.thisObj,i.clone());var s=Date.now();s-o>2&&Log("tick回调耗时:"+(s-o))}i.replayCount<=0&&(i.isValid=!1)}}for(var a=t.length;a>0;){var i=t[a-1];i.isValid||t.splice(a-1,1),a--}return!1},i.addTick=function(e,t,n,i){for(var o=[],s=4;s<arguments.length;s++)o[s-4]=arguments[s];var a=this.tickList;if(a)for(var h=0,u=a.length;u>h;h++){var c=a[h];if(c.callback==n&&c.thisObj==i)return}else a=[],this.tickList=a;var d=new r;d.delay=e,d.replayCount=0>=t?Number.MAX_VALUE:t,d.callback=n,d.thisObj=i,d.args=o,d.timestamp=Date.now(),d.isValid=!0,a.push(d)},i.removeTick=function(e,t){var r=this.tickList;if(r)for(var n=0,i=r.length;i>n;n++){var o=r[n];if(o.callback==e&&o.thisObj==t)return void r.splice(n,1)}},i.removeTicks=function(e){var t=this.tickList;if(t){for(var r=0,n=t.length;n>r;r++){var i=t[r];i.thisObj==e&&(i.isValid=!1)}for(var o=t.length;o>0;){var i=t[o-1];i.isValid||t.splice(o-1,1),o--}}},i.removeAllTicks=function(){this.tickList.length=0},t(e,"instance",function(){return null==e.s_instance&&(e.s_instance=new e),e.s_instance}),e}();e.TimerManager=t,egret.registerClass(t,"core.TimerManager");var r=function(e){function t(){e.call(this)}__extends(t,e);var r=(__define,t),n=r.prototype;return n.clone=function(){var e=new t;return e.delay=this.delay,e.replayCount=this.replayCount,e.callback=this.callback,e.thisObj=this.thisObj,e.args=this.args,e.isValid=this.isValid,e},t}(egret.HashObject);e.TickData=r,egret.registerClass(r,"core.TickData")}(core||(core={}));var core;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e.initEncodeChar=function(){for(var e=new Array(64),t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,n=t.length;n>r;r++)e[r]=t.charCodeAt(r);return e},e.initDecodeChar=function(){var e=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];return e},e.encode=function(t){var r=new egret.ByteArray,n=0,i=t.length,o=i%3,s=i-o,a=0;for(t.position=0;s>n;)a=(255&t.readByte())<<16|(255&t.readByte())<<8|255&t.readByte(),r.writeByte(e.encodeChars[a>>>18]),r.writeByte(e.encodeChars[a>>>12&63]),r.writeByte(e.encodeChars[a>>>6&63]),r.writeByte(e.encodeChars[63&a]),n+=3;return 1==o?(a=255&t.readByte(),r.writeByte(e.encodeChars[a>>>2]),r.writeByte(e.encodeChars[3&a]),r.writeByte(61),r.writeByte(61)):2==o&&(a=(255&t.readByte())<<8|255&t.readByte(),r.writeByte(e.encodeChars[a>>>10]),r.writeByte(e.encodeChars[a>>>4&63]),r.writeByte(e.encodeChars[(15&a)<<2]),r.writeByte(61)),n+=o,r.position=0,r.readUTFBytes(r.length)},e.decode=function(t){var r=new egret.ByteArray,n=new egret.ByteArray;n.writeUTFBytes(t),n.position=0;for(var i,o,s,a,h=0,u=n.length;u>h&&(i=e.decodeChars[255&n.readByte()],-1!=i)&&(o=e.decodeChars[255&n.readByte()],-1!=o)&&(r.writeByte(i<<2|3&o),s=255&n.readByte(),61!=s)&&(s=e.decodeChars[s],-1!=s)&&(r.writeByte(240&o|15&s),a=255&n.readByte(),61!=a)&&(a=e.decodeChars[a],-1!=a);)r.writeByte(192&s|a),h+=4;return r.position=0,r},e.encodeStr=function(t){if(null!=t&&""!=t){var r=new egret.ByteArray;return r.writeUTFBytes(t),e.encode(r)}return""},e.decodeStr=function(t){if(null!=t&&""!=t){var r=e.decode(t);return r.readUTFBytes(r.length)}return""},e.encodeChars=e.initEncodeChar(),e.decodeChars=e.initDecodeChar(),e}();e.Base64=t,egret.registerClass(t,"core.Base64")}(core||(core={}));var core;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e.addObj=function(t,r){var n=e.pool[t];n?n.push(r):e.pool[t]=[r]},e.getObj=function(t){var r=e.pool[t];return r?r.pop():null},e.clear=function(t){delete e.pool[t]},e.clearAll=function(){e.pool={}},e.pool={},e}();e.CachePool=t,egret.registerClass(t,"core.CachePool")}(core||(core={}));var core;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e.setServerTime=function(e){this.s_clintTimestamp=Date.now(),this.s_serverTimestamp=e},e.getServerTimeMill=function(){return this.s_serverTimestamp+(Date.now()-this.s_clintTimestamp)},e.formatDate=function(t,r){null==r&&(r=e.date);var n={"M+":r.getUTCMonth()+1,"d+":r.getUTCDate(),"h+":r.getUTCHours(),"m+":r.getUTCMinutes(),"s+":r.getUTCSeconds(),"q+":Math.floor((r.getUTCMonth()+3)/3),S:r.getUTCMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(r.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return t},e.format=function(e){var t=e,r=e%1e3;t=.001*(t-r);var n=t%60;t=(t-n)/60;var i=t%60;return t=(t-i)/60,(0>t?0:t)+":"+(i>9?i:"0"+(0>i?0:i))+":"+(n>9?n:"0"+(0>n?0:n))},e.date=new Date,e}();e.DateUtils=t,egret.registerClass(t,"core.DateUtils")}(core||(core={}));var core;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e.begin=function(t){e.s_dic[t]=Date.now()},e.finish=function(t){return Date.now()-e.s_dic[t]},e.s_dic=new Dictionary,e}();e.DebugUtils=t,egret.registerClass(t,"core.DebugUtils")}(core||(core={}));var Long=function(){function e(e,t,r){this.__isLong__={value:!0,enumerable:!1,configurable:!1},this.low=0|e,this.high=0|t,this.unsigned=!!r}var t=__define,r=e,n=r.prototype;return n.isLong=function(e){return(e&&e.__isLong__)===!0},n.toInt=function(){return this.unsigned?this.low>>>0:this.low},n.toNumber=function(){return this.unsigned?(this.high>>>0)*e.TWO_PWR_32_DBL+(this.low>>>0):this.high*e.TWO_PWR_32_DBL+(this.low>>>0)},n.toString=function(t){if(t=t||10,2>t||t>36)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(e.MIN_VALUE)){var r=e.fromNumber(t),n=this.div(r),i=n.mul(r).sub(this);return n.toString(t)+i.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var o=e.fromNumber(e.pow_dbl(t,6),this.unsigned),s=this,a="";;){var h=s.div(o),u=s.sub(h.mul(o)).toInt()>>>0,c=u.toString(t);if(s=h,s.isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}},t(n,"highBitsUnsigned",function(){return this.high>>>0}),t(n,"lowBitsUnsigned",function(){return this.low>>>0}),n.getNumBitsAbs=function(){if(this.isNegative())return this.eq(e.MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,r=31;r>0&&0==(t&1<<r);r--);return 0!=this.high?r+33:r+1},n.isZero=function(){return 0===this.high&&0===this.low},n.isNegative=function(){return!this.unsigned&&this.high<0},n.isPositive=function(){return this.unsigned||this.high>=0},n.isOdd=function(){return 1===(1&this.low)},n.isEven=function(){return 0===(1&this.low)},n.eq=function(t){return this.isLong(t)||(t=e.fromValue(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low},n.neq=function(e){return!this.eq(e)},n.lt=function(e){return this.compare(e)<0},n.lte=function(e){return this.compare(e)<=0},n.gt=function(e){return this.compare(e)>0},n.gte=function(e){return this.compare(e)>=0},n.compare=function(t){if(this.isLong(t)||(t=e.fromValue(t)),this.eq(t))return 0;var r=this.isNegative(),n=t.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},n.neg=function(){return!this.unsigned&&this.eq(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},n.add=function(t){this.isLong(t)||(t=e.fromValue(t));var r=this.high>>>16,n=65535&this.high,i=this.low>>>16,o=65535&this.low,s=t.high>>>16,a=65535&t.high,h=t.low>>>16,u=65535&t.low,c=0,d=0,l=0,f=0;return f+=o+u,l+=f>>>16,f&=65535,l+=i+h,d+=l>>>16,l&=65535,d+=n+a,c+=d>>>16,d&=65535,c+=r+s,c&=65535,e.fromBits(l<<16|f,c<<16|d,this.unsigned)},n.sub=function(t){return this.isLong(t)||(t=e.fromValue(t)),this.add(t.neg())},n.mul=function(t){if(this.isZero())return e.ZERO;if(this.isLong(t)||(t=e.fromValue(t)),t.isZero())return e.ZERO;if(this.eq(e.MIN_VALUE))return t.isOdd()?e.MIN_VALUE:e.ZERO;if(t.eq(e.MIN_VALUE))return this.isOdd()?e.MIN_VALUE:e.ZERO;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(e.TWO_PWR_24)&&t.lt(e.TWO_PWR_24))return e.fromNumber(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,n=65535&this.high,i=this.low>>>16,o=65535&this.low,s=t.high>>>16,a=65535&t.high,h=t.low>>>16,u=65535&t.low,c=0,d=0,l=0,f=0;return f+=o*u,l+=f>>>16,f&=65535,l+=i*u,d+=l>>>16,l&=65535,l+=o*h,d+=l>>>16,l&=65535,d+=n*u,c+=d>>>16,d&=65535,d+=i*h,c+=d>>>16,d&=65535,d+=o*a,c+=d>>>16,d&=65535,c+=r*u+n*h+i*a+o*s,c&=65535,e.fromBits(l<<16|f,c<<16|d,this.unsigned)},n.div=function(t){if(this.isLong(t)||(t=e.fromValue(t)),t.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?e.UZERO:e.ZERO;var r,n,i;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return e.UZERO;if(t.gt(this.shru(1)))return e.UONE;i=e.UZERO}else{if(this.eq(e.MIN_VALUE)){if(t.eq(e.ONE)||t.eq(e.NEG_ONE))return e.MIN_VALUE;if(t.eq(e.MIN_VALUE))return e.ONE;var o=this.shr(1);return r=o.div(t).shl(1),r.eq(e.ZERO)?t.isNegative()?e.ONE:e.NEG_ONE:(n=this.sub(t.mul(r)),i=r.add(n.div(t)))}if(t.eq(e.MIN_VALUE))return this.unsigned?e.UZERO:e.ZERO;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();i=e.ZERO}for(n=this;n.gte(t);){r=Math.max(1,Math.floor(n.toNumber()/t.toNumber()));for(var s=Math.ceil(Math.log(r)/Math.LN2),a=48>=s?1:e.pow_dbl(2,s-48),h=e.fromNumber(r),u=h.mul(t);u.isNegative()||u.gt(n);)r-=a,h=e.fromNumber(r,this.unsigned),u=h.mul(t);h.isZero()&&(h=e.ONE),i=i.add(h),n=n.sub(u)}return i},n.mod=function(t){return this.isLong(t)||(t=e.fromValue(t)),this.sub(this.div(t).mul(t))},n.not=function(){return e.fromBits(~this.low,~this.high,this.unsigned)},n.and=function(t){return this.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low&t.low,this.high&t.high,this.unsigned)},n.or=function(t){return this.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low|t.low,this.high|t.high,this.unsigned)},n.xor=function(t){return this.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low^t.low,this.high^t.high,this.unsigned)},n.shl=function(t){return this.isLong(t)&&(t=t.toInt()),0===(t&=63)?this:32>t?e.fromBits(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):e.fromBits(0,this.low<<t-32,this.unsigned)},n.shr=function(t){return this.isLong(t)&&(t=t.toInt()),0===(t&=63)?this:32>t?e.fromBits(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):e.fromBits(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},n.shru=function(t){if(this.isLong(t)&&(t=t.toInt()),t&=63,0===t)return this;var r=this.high;if(32>t){var n=this.low;return e.fromBits(n>>>t|r<<32-t,r>>>t,this.unsigned)}return 32===t?e.fromBits(r,0,this.unsigned):e.fromBits(r>>>t-32,0,this.unsigned)},n.toSigned=function(){return this.unsigned?e.fromBits(this.low,this.high,!1):this},n.toUnsigned=function(){return this.unsigned?this:e.fromBits(this.low,this.high,!0)},n.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24&255,255&e,e>>>8&255,e>>>16&255,e>>>24&255]},n.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t]},e.fromInt=function(t,r){var n,i,o;return r?(t>>>=0,(o=t>=0&&256>t)&&(i=e.UINT_CACHE[t])?i:(n=e.fromBits(t,0>(0|t)?-1:0,!0),o&&(e.UINT_CACHE[t]=n),n)):(t|=0,(o=t>=-128&&128>t)&&(i=e.INT_CACHE[t])?i:(n=e.fromBits(t,0>t?-1:0,!1),o&&(e.INT_CACHE[t]=n),n))},e.fromNumber=function(t,r){if(isNaN(t)||!isFinite(t))return r?e.UZERO:e.ZERO;if(r){if(0>t)return e.UZERO;if(t>=e.TWO_PWR_64_DBL)return e.MAX_UNSIGNED_VALUE}else{if(t<=-e.TWO_PWR_63_DBL)return e.MIN_VALUE;if(t+1>=e.TWO_PWR_63_DBL)return e.MAX_VALUE}return 0>t?e.fromNumber(-t,r).neg():e.fromBits(t%e.TWO_PWR_32_DBL|0,t/e.TWO_PWR_32_DBL|0,r)},e.fromBits=function(t,r,n){return new e(t,r,n)},e.fromString=function(t,r,n){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return e.ZERO;if("number"==typeof r?(n=r,r=!1):r=!!r,n=n||10,2>n||n>36)throw RangeError("radix");var i;if((i=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===i)return e.fromString(t.substring(1),r,n).neg();for(var o=e.fromNumber(e.pow_dbl(n,8)),s=e.ZERO,a=0;a<t.length;a+=8){var h=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+h),n);if(8>h){var c=e.fromNumber(e.pow_dbl(n,h));s=s.mul(c).add(e.fromNumber(u))}else s=s.mul(o),s=s.add(e.fromNumber(u))}return s.unsigned=r,s},e.fromValue=function(t){return t instanceof e?t:"number"==typeof t?e.fromNumber(t):"string"==typeof t?e.fromString(t):e.fromBits(t.low,t.high,t.unsigned)},e.INT_CACHE={},e.UINT_CACHE={},e.TWO_PWR_16_DBL=65536,e.TWO_PWR_24_DBL=1<<24,e.TWO_PWR_32_DBL=e.TWO_PWR_16_DBL*e.TWO_PWR_16_DBL,e.TWO_PWR_64_DBL=e.TWO_PWR_32_DBL*e.TWO_PWR_32_DBL,e.TWO_PWR_63_DBL=e.TWO_PWR_64_DBL/2,e.TWO_PWR_24=e.fromInt(e.TWO_PWR_24_DBL),e.ZERO=e.fromInt(0),e.UZERO=e.fromInt(0,!0),e.ONE=e.fromInt(1),e.UONE=e.fromInt(1,!0),e.NEG_ONE=e.fromInt(-1),e.MAX_VALUE=e.fromBits(-1,2147483647,!1),e.MAX_UNSIGNED_VALUE=e.fromBits(-1,-1,!0),e.MIN_VALUE=e.fromBits(0,-2147483648,!1),e.pow_dbl=Math.pow,e}();egret.registerClass(Long,"Long");var core;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e.ceil=function(e){return e%1==0?e:e>0?e+1<<0:e<<0},e}();e.MathUtils=t,egret.registerClass(t,"core.MathUtils")}(core||(core={}));var core;!function(e){var t=function(){function e(){this.m_factorys={},this.m_mcFactorys={}}var t=__define,r=e,n=r.prototype;return n.getMovieClip=function(e,t,r,n){void 0===n&&(n=!0);var i=this.m_mcFactorys[e];if(!i){var o=RES.getRes(e),s=RES.getRes(t);i=new egret.MovieClipDataFactory(o,s),i.enableCache=!0,this.m_mcFactorys[e]=i}var a=this.m_factorys[e+">"+r];if(a||(a=[],this.m_factorys[e+">"+r]=a),a.length>0){var h=a.pop();return h.gotoAndStop(1),h}var u=i.generateMovieClipData(r);if(u.mcData){var h=new egret.MovieClip(u);return h.gotoAndStop(1),n&&(h.anchorOffsetX=.5*(h.width+2*u.mcData.frames[0].x),h.anchorOffsetY=.5*(h.height+2*u.mcData.frames[0].y)),h}return null},n.revertMovieClip=function(e,t,r){if(r){r.gotoAndStop(1),r.parent&&r.parent.removeChild(r);var n=this.m_factorys[e+">"+t];n||(n=[],this.m_factorys[e+">"+t]=n),n.push(r)}},t(e,"instance",function(){return null==e.s_instance&&(e.s_instance=new e),e.s_instance}),e}();e.MCFactory=t,egret.registerClass(t,"core.MCFactory")}(core||(core={}));var md5=function(){function e(){this.hexcase=0,this.b64pad=""}var t=(__define,e),r=t.prototype;return r.hex_md5=function(e){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(e)))},r.b64_md5=function(e){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(e)))},r.any_md5=function(e,t){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(e)),t)},r.hex_hmac_md5=function(e,t){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},r.b64_hmac_md5=function(e,t){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},r.any_hmac_md5=function(e,t,r){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)),r)},r.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},r.rstr_md5=function(e){return this.binl2rstr(this.binl_md5(this.rstr2binl(e),8*e.length))},r.rstr_hmac_md5=function(e,t){var r=this.rstr2binl(e);r.length>16&&(r=this.binl_md5(r,8*e.length));for(var n=Array(16),i=Array(16),o=0;16>o;o++)n[o]=909522486^r[o],i[o]=1549556828^r[o];var s=this.binl_md5(n.concat(this.rstr2binl(t)),512+8*t.length);return this.binl2rstr(this.binl_md5(i.concat(s),640))},r.rstr2hex=function(e){try{this.hexcase}catch(t){this.hexcase=0}for(var r,n=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",i="",o=0;o<e.length;o++)r=e.charCodeAt(o),i+=n.charAt(r>>>4&15)+n.charAt(15&r);return i},r.rstr2b64=function(e){try{this.b64pad}catch(t){this.b64pad=""}for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",i=e.length,o=0;i>o;o+=3)for(var s=e.charCodeAt(o)<<16|(i>o+1?e.charCodeAt(o+1)<<8:0)|(i>o+2?e.charCodeAt(o+2):0),a=0;4>a;a++)n+=8*o+6*a>8*e.length?this.b64pad:r.charAt(s>>>6*(3-a)&63);return n},r.rstr2any=function(e,t){var r,n,i,o,s,a=t.length,h=Array(Math.ceil(e.length/2));for(r=0;r<h.length;r++)h[r]=e.charCodeAt(2*r)<<8|e.charCodeAt(2*r+1);
var u=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),c=Array(u);for(n=0;u>n;n++){for(s=Array(),o=0,r=0;r<h.length;r++)o=(o<<16)+h[r],i=Math.floor(o/a),o-=i*a,(s.length>0||i>0)&&(s[s.length]=i);c[n]=o,h=s}var d="";for(r=c.length-1;r>=0;r--)d+=t.charAt(c[r]);return d},r.str2rstr_utf8=function(e){for(var t,r,n="",i=-1;++i<e.length;)t=e.charCodeAt(i),r=i+1<e.length?e.charCodeAt(i+1):0,t>=55296&&56319>=t&&r>=56320&&57343>=r&&(t=65536+((1023&t)<<10)+(1023&r),i++),127>=t?n+=String.fromCharCode(t):2047>=t?n+=String.fromCharCode(192|t>>>6&31,128|63&t):65535>=t?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):2097151>=t&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n},r.str2rstr_utf16le=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(255&e.charCodeAt(r),e.charCodeAt(r)>>>8&255);return t},r.str2rstr_utf16be=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e.charCodeAt(r)>>>8&255,255&e.charCodeAt(r));return t},r.rstr2binl=function(e){for(var t=Array(e.length>>2),r=0;r<t.length;r++)t[r]=0;for(var r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<r%32;return t},r.binl2rstr=function(e){for(var t="",r=0;r<32*e.length;r+=8)t+=String.fromCharCode(e[r>>5]>>>r%32&255);return t},r.binl_md5=function(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var r=1732584193,n=-271733879,i=-1732584194,o=271733878,s=0;s<e.length;s+=16){var a=r,h=n,u=i,c=o;r=this.md5_ff(r,n,i,o,e[s+0],7,-680876936),o=this.md5_ff(o,r,n,i,e[s+1],12,-389564586),i=this.md5_ff(i,o,r,n,e[s+2],17,606105819),n=this.md5_ff(n,i,o,r,e[s+3],22,-1044525330),r=this.md5_ff(r,n,i,o,e[s+4],7,-176418897),o=this.md5_ff(o,r,n,i,e[s+5],12,1200080426),i=this.md5_ff(i,o,r,n,e[s+6],17,-1473231341),n=this.md5_ff(n,i,o,r,e[s+7],22,-45705983),r=this.md5_ff(r,n,i,o,e[s+8],7,1770035416),o=this.md5_ff(o,r,n,i,e[s+9],12,-1958414417),i=this.md5_ff(i,o,r,n,e[s+10],17,-42063),n=this.md5_ff(n,i,o,r,e[s+11],22,-1990404162),r=this.md5_ff(r,n,i,o,e[s+12],7,1804603682),o=this.md5_ff(o,r,n,i,e[s+13],12,-40341101),i=this.md5_ff(i,o,r,n,e[s+14],17,-1502002290),n=this.md5_ff(n,i,o,r,e[s+15],22,1236535329),r=this.md5_gg(r,n,i,o,e[s+1],5,-165796510),o=this.md5_gg(o,r,n,i,e[s+6],9,-1069501632),i=this.md5_gg(i,o,r,n,e[s+11],14,643717713),n=this.md5_gg(n,i,o,r,e[s+0],20,-373897302),r=this.md5_gg(r,n,i,o,e[s+5],5,-701558691),o=this.md5_gg(o,r,n,i,e[s+10],9,38016083),i=this.md5_gg(i,o,r,n,e[s+15],14,-660478335),n=this.md5_gg(n,i,o,r,e[s+4],20,-405537848),r=this.md5_gg(r,n,i,o,e[s+9],5,568446438),o=this.md5_gg(o,r,n,i,e[s+14],9,-1019803690),i=this.md5_gg(i,o,r,n,e[s+3],14,-187363961),n=this.md5_gg(n,i,o,r,e[s+8],20,1163531501),r=this.md5_gg(r,n,i,o,e[s+13],5,-1444681467),o=this.md5_gg(o,r,n,i,e[s+2],9,-51403784),i=this.md5_gg(i,o,r,n,e[s+7],14,1735328473),n=this.md5_gg(n,i,o,r,e[s+12],20,-1926607734),r=this.md5_hh(r,n,i,o,e[s+5],4,-378558),o=this.md5_hh(o,r,n,i,e[s+8],11,-2022574463),i=this.md5_hh(i,o,r,n,e[s+11],16,1839030562),n=this.md5_hh(n,i,o,r,e[s+14],23,-35309556),r=this.md5_hh(r,n,i,o,e[s+1],4,-1530992060),o=this.md5_hh(o,r,n,i,e[s+4],11,1272893353),i=this.md5_hh(i,o,r,n,e[s+7],16,-155497632),n=this.md5_hh(n,i,o,r,e[s+10],23,-1094730640),r=this.md5_hh(r,n,i,o,e[s+13],4,681279174),o=this.md5_hh(o,r,n,i,e[s+0],11,-358537222),i=this.md5_hh(i,o,r,n,e[s+3],16,-722521979),n=this.md5_hh(n,i,o,r,e[s+6],23,76029189),r=this.md5_hh(r,n,i,o,e[s+9],4,-640364487),o=this.md5_hh(o,r,n,i,e[s+12],11,-421815835),i=this.md5_hh(i,o,r,n,e[s+15],16,530742520),n=this.md5_hh(n,i,o,r,e[s+2],23,-995338651),r=this.md5_ii(r,n,i,o,e[s+0],6,-198630844),o=this.md5_ii(o,r,n,i,e[s+7],10,1126891415),i=this.md5_ii(i,o,r,n,e[s+14],15,-1416354905),n=this.md5_ii(n,i,o,r,e[s+5],21,-57434055),r=this.md5_ii(r,n,i,o,e[s+12],6,1700485571),o=this.md5_ii(o,r,n,i,e[s+3],10,-1894986606),i=this.md5_ii(i,o,r,n,e[s+10],15,-1051523),n=this.md5_ii(n,i,o,r,e[s+1],21,-2054922799),r=this.md5_ii(r,n,i,o,e[s+8],6,1873313359),o=this.md5_ii(o,r,n,i,e[s+15],10,-30611744),i=this.md5_ii(i,o,r,n,e[s+6],15,-1560198380),n=this.md5_ii(n,i,o,r,e[s+13],21,1309151649),r=this.md5_ii(r,n,i,o,e[s+4],6,-145523070),o=this.md5_ii(o,r,n,i,e[s+11],10,-1120210379),i=this.md5_ii(i,o,r,n,e[s+2],15,718787259),n=this.md5_ii(n,i,o,r,e[s+9],21,-343485551),r=this.safe_add(r,a),n=this.safe_add(n,h),i=this.safe_add(i,u),o=this.safe_add(o,c)}return[r,n,i,o]},r.md5_cmn=function(e,t,r,n,i,o){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(t,e),this.safe_add(n,o)),i),r)},r.md5_ff=function(e,t,r,n,i,o,s){return this.md5_cmn(t&r|~t&n,e,t,i,o,s)},r.md5_gg=function(e,t,r,n,i,o,s){return this.md5_cmn(t&n|r&~n,e,t,i,o,s)},r.md5_hh=function(e,t,r,n,i,o,s){return this.md5_cmn(t^r^n,e,t,i,o,s)},r.md5_ii=function(e,t,r,n,i,o,s){return this.md5_cmn(r^(t|~n),e,t,i,o,s)},r.safe_add=function(e,t){var r=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(r>>16);return n<<16|65535&r},r.bit_rol=function(e,t){return e<<t|e>>>32-t},e}();egret.registerClass(md5,"md5");var core;!function(e){var t=function(){function e(){}var t=__define,r=e;r.prototype;return t(e,"isPC",function(){return"Windows PC"==egret.Capabilities.os}),t(e,"isiOS",function(){return"iOS"==egret.Capabilities.os}),t(e,"isAndroid",function(){return"Android"==egret.Capabilities.os}),t(e,"isWindowPhone",function(){return"Windows Phone"==egret.Capabilities.os}),t(e,"isMacOS",function(){return"Mac OS"==egret.Capabilities.os}),t(e,"isUnknown",function(){return"Unknown"==egret.Capabilities.os}),e}();e.PlatUtils=t,egret.registerClass(t,"core.PlatUtils")}(core||(core={}));var core;!function(e){var t=function(){function e(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this)}var t=(__define,e),r=t.prototype;return r.onResourceLoadError=function(e){this.groupData.curGroup==e.groupName&&(this.groupData.curGroupLoaded=e.itemsLoaded,this.groupData.curGroupTotal=e.itemsTotal,this.groupData.curResItem=e.resItem,this.groupData.onLoadFaild&&this.groupData.onLoadFaild.call(this.groupData.thisObj,this.groupData))},r.onResourceProgress=function(e){this.updateGroupData(e.groupName,e.itemsLoaded,e.itemsTotal,e.resItem)},r.onResourceLoadComplete=function(e){this.updateGroupData(e.groupName,e.itemsTotal,e.itemsTotal,e.resItem)},r.updateGroupData=function(e,t,r,n){void 0===t&&(t=0),void 0===r&&(r=0),this.groupData.curGroup==e&&(this.groupData.curGroupLoaded=t,this.groupData.curGroupTotal=r,this.groupData.curResItem=n,t==r?(this.groupData.loadedQueue.indexOf(e)<0&&(this.groupData.loadedQueue.push(e),this.groupData.loaded=this.groupData.loadedQueue.length),this.groupData.loaded==this.groupData.total?(this.groupData.onLoadComplete&&this.groupData.onLoadComplete.call(this.groupData.thisObj,this.groupData),this.destory()):(this.groupData.onLoadProgress&&this.groupData.onLoadProgress.call(this.groupData.thisObj,this.groupData),this.loadNext())):this.groupData.onLoadProgress&&this.groupData.onLoadProgress.call(this.groupData.thisObj,this.groupData))},r.loadNext=function(){var e=this.groupData.loadQueue.shift();e?(this.groupData.curGroup=e,RES.isGroupLoaded(e)?this.updateGroupData(e):RES.loadGroup(e)):this.groupData.onLoadComplete&&this.groupData.onLoadComplete.call(this.groupData.thisObj,this.groupData)},r.destory=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.groupData=null},r.loadGroups=function(e){this.groupData=e,this.loadNext()},e}();egret.registerClass(t,"GroupLoader");var r=function(){function e(){}var r=(__define,e);r.prototype;return e.loadGroups=function(e,r,i,o,s){if(e){var a=new n;if(a.loadQueue=e,a.loadedQueue=[],a.loaded=0,a.total=e.length,a.onLoadProgress=r,a.onLoadFaild=i,a.onLoadComplete=o,a.thisObj=s,e.length>0){var h=new t;h.loadGroups(a)}else o&&o.call(s,a)}},e}();e.ResUtils=r,egret.registerClass(r,"core.ResUtils");var n=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var r=(__define,t);r.prototype;return t}(e.ProgressData);e.GroupData=n,egret.registerClass(n,"core.GroupData")}(core||(core={}));var com_main;!function(e){var t=function(){function e(){this.m_BGMVolume=1,this.m_effectVolume=1,this.m_sounds={},this.m_channels={},this.m_callbacks={},this.m_playChannel={},this.m_soundGroups={},this.m_soundGroups[egret.Sound.EFFECT]=[],this.m_soundGroups[egret.Sound.MUSIC]=[];var e=egret.localStorage.getItem("soundEffect");e&&(this.m_effectVolume=parseInt(e)),e=egret.localStorage.getItem("soundBGM"),e&&(this.m_BGMVolume=parseInt(e))}var t=__define,r=e,n=r.prototype;return t(n,"playerId",void 0,function(e){this.m_playerId=e}),n.playSoundById=function(e,t){t==this.m_playerId&&this.playSound(e)},n.playSound=function(e,t,r){void 0===t&&(t=1);var n;if(!n)return void Log("ID为"+e+"的音效在SoundConfig中不存在");this.stopSound(n.coverKey.toString());var i=this.m_sounds[e];if(i||(i=RES.getRes(n.soundName),i.type=0==n.soundType?egret.Sound.EFFECT:egret.Sound.MUSIC,this.m_sounds[e]=i,this.m_soundGroups[i.type].push(i)),!i)return void Log("名称为"+n.soundName+"的音效资源不存在");this.m_playChannel[n.coverKey.toString()]=i,i.cover=n.coverKey.toString();var o=void 0;try{o=i.play(0,t)}catch(s){return Log("ID为"+e+"的音乐播放失败"),void delete this.m_playChannel[n.coverKey.toString()]}o.owner=i,o.maxCount=t>0?t:Number.MAX_VALUE,o.count=0,i.type==egret.Sound.EFFECT?o.volume=this.m_effectVolume:o.volume=this.m_BGMVolume,r&&(this.m_callbacks[o.hashCode.toString()]=r),o.addEventListener(egret.Event.SOUND_COMPLETE,this.onPlayComplete,this),this.m_channels[i.hashCode.toString()]=o},n.onPlayComplete=function(e){var t=e.currentTarget,r=this.m_callbacks[t.hashCode.toString()];r&&r(),t.count++,t.count>=t.maxCount&&this.stop(t.owner)},n.stopSoundByID=function(e){var t=this.m_sounds[e];t&&this.stop(t)},n.stopSound=function(e){var t=this.m_playChannel[e];t&&this.stop(t)},n.stop=function(e){var t=this.m_channels[e.hashCode.toString()];if(t){try{t.stop()}catch(r){Log("停止播放音乐失败")}t.hasEventListener(egret.Event.SOUND_COMPLETE)&&t.removeEventListener(egret.Event.SOUND_COMPLETE,this.onPlayComplete,this),delete this.m_callbacks[t.hashCode.toString()],delete this.m_channels[e.hashCode.toString()]}delete this.m_playChannel[e.cover]},n.setBGMValume=function(e){egret.localStorage.setItem("soundBGM",e.toString()),this.m_BGMVolume=e;for(var t=this.m_soundGroups[egret.Sound.MUSIC],r=0,n=t.length;n>r;r++){var i=t[r];if(i){var o=this.m_channels[i.hashCode.toString()];if(o)try{o.volume=e}catch(s){Log("背景音乐音量设置失败")}}}},n.getBGMValue=function(){return this.m_BGMVolume},n.setEffectValume=function(e){egret.localStorage.setItem("soundEffect",e.toString()),this.m_effectVolume=e;for(var t=this.m_soundGroups[egret.Sound.EFFECT],r=0,n=t.length;n>r;r++){var i=t[r];if(i){var o=this.m_channels[i.hashCode.toString()];if(o)try{o.volume=e}catch(s){Log("音效音量设置失败")}}}},n.getEffectValue=function(){return this.m_effectVolume},e.getInstance=function(){return null==e.s_instance&&(e.s_instance=new e),e.s_instance},e}();e.SoundUtils=t,egret.registerClass(t,"com_main.SoundUtils")}(com_main||(com_main={}));var core;!function(e){var t=function(){function t(){}var r=(__define,t);r.prototype;return t.createTextfield=function(e,t,r,n,i){void 0===t&&(t=16777215),void 0===r&&(r=egret.VerticalAlign.MIDDLE),void 0===n&&(n=egret.HorizontalAlign.CENTER),void 0===i&&(i="Verdana");var o=new egret.TextField;return o.size=e,o.textColor=t,o.textAlign=n,o.verticalAlign=r,o.fontFamily=i,o.cacheAsBitmap=!0,o},t.formatString=function(e,t){if(e){for(var r=/\{[0-9]+\}/;e.match(r);){var n=e.match(r);e=e.replace(r,t[n.index])}return e}return""},t.showTextTip=function(t,r){void 0===r&&(r=16777215);var n=e.LayerCenter.stageWidth,i=e.LayerCenter.stageHeight,o=e.TextUtils.createTextfield(24);o.text=t,o.textColor=r,o.width=o.textWidth,o.height=o.textHeight,o.x=.5*(n-o.width),o.y=.5*(i-o.height),e.LayerCenter.getInstance().stage.addChild(o),egret.Tween.get(o).to({y:.4*i,alpha:0},2e3).call(function(e){e.parent.removeChild(e)},this,[o])},t}();e.TextUtils=t,egret.registerClass(t,"core.TextUtils")}(core||(core={}));var core;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(t,"WebUtils")}(core||(core={}));var core;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.XMLUtils=t,egret.registerClass(t,"core.XMLUtils")}(core||(core={}));var ModeController=function(e){function t(){e.call(this,ModuleEnum.Mode)}__extends(t,e);var r=(__define,t),n=r.prototype;return n.getLoadGroup=function(){return["commonUI"]},n.show=function(){var e=new ModeView;core.LayerCenter.getInstance().getLayer(LayerEnum.UI).addChild(e)},n.hide=function(){},n.release=function(){e.prototype.release.call(this)},t}(core.Control);egret.registerClass(ModeController,"ModeController");var LayerEnum;!function(e){e[e.BG=0]="BG",e[e.UI=1]="UI",e[e.POPUP=2]="POPUP",e[e.TOP=3]="TOP"}(LayerEnum||(LayerEnum={}));var ModuleEnum;!function(e){e[e.Mode=0]="Mode"}(ModuleEnum||(ModuleEnum={}));var ModeView=function(e){function t(){e.call(this),this.skinName="resource/skin/ModeSkin.exml"}__extends(t,e);var r=(__define,t),n=r.prototype;return n.createChildren=function(){e.prototype.createChildren.call(this)},n.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(eui.Component);egret.registerClass(ModeView,"ModeView");var LoadingUI=function(e){function t(){e.call(this),this.createView()}__extends(t,e);var r=(__define,t),n=r.prototype;return n.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},n.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(e){function t(){e.apply(this,arguments),this.isThemeLoadEnd=!1,this.isResourceLoadEnd=!1}__extends(t,e);var r=(__define,t),n=r.prototype;return n.createChildren=function(){e.prototype.createChildren.call(this),core.Core.run(this.stage),core.LayerCenter.getInstance().addLayer(LayerEnum.BG,new core.Layer),core.LayerCenter.getInstance().addLayer(LayerEnum.UI,new core.EUILayer),core.LayerCenter.getInstance().addLayer(LayerEnum.POPUP,new core.Layer),core.LayerCenter.getInstance().addLayer(LayerEnum.TOP,new core.Layer),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/"),this.initController()},n.initController=function(){new ModeController},n.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter);var r=new eui.Theme("resource/default.thm.json",this.stage);r.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},n.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},n.onResourceLoadComplete=function(e){if("preload"==e.groupName){this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,core.ProtoFactory.init(RES.getRes("game_proto"));var t=core.ProtoFactory.createMessage("BattleJoinReq");Log(t),core.SocketAPI.getInstance().sendData(t),this.createScene()}},n.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&egret.setTimeout(function(){core.EventCenter.getInstance().sendEvent(new core.ModuleEventData(core.EventID.MODULE_SHOW,ModuleEnum.Mode))},this,1e4)},n.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},n.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},n.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},t}(eui.UILayer);egret.registerClass(Main,"Main");var ThemeAdapter=function(){function e(){}var t=(__define,e),r=t.prototype;return r.getTheme=function(e,t,r,n){function i(e){t.call(n,e)}function o(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),r.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_TEXT)},e}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);